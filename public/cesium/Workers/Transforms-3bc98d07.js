define(["exports","./Matrix2-59fd2efe","./RuntimeError-24b14c10","./when-ae2e0b60","./ComponentDatatype-b7b5db18","./combine-276652d0"],function(e,q,y,M,c,A){function N(e){this._ellipsoid=M.defaultValue(e,q.Ellipsoid.WGS84),this._semimajorAxis=this._ellipsoid.maximumRadius,this._oneOverSemimajorAxis=1/this._semimajorAxis}Object.defineProperties(N.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}}),N.prototype.project=function(e,t){var n=this._semimajorAxis,r=e.longitude*n,n=e.latitude*n,e=e.height;return M.defined(t)?(t.x=r,t.y=n,t.z=e,t):new q.Cartesian3(r,n,e)},N.prototype.unproject=function(e,t){var n=this._oneOverSemimajorAxis,r=e.x*n,n=e.y*n,e=e.z;return M.defined(t)?(t.longitude=r,t.latitude=n,t.height=e,t):new q.Cartographic(r,n,e)};var F=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1});function z(e,t){this.start=M.defaultValue(e,0),this.stop=M.defaultValue(t,0)}function T(e,t){this.center=q.Cartesian3.clone(M.defaultValue(e,q.Cartesian3.ZERO)),this.radius=M.defaultValue(t,0)}for(var B=new q.Cartesian3,V=new q.Cartesian3,k=new q.Cartesian3,L=new q.Cartesian3,j=new q.Cartesian3,W=new q.Cartesian3,Y=new q.Cartesian3,I=new q.Cartesian3,H=new q.Cartesian3,J=new q.Cartesian3,X=new q.Cartesian3,G=new q.Cartesian3,Z=4/3*c.CesiumMath.PI,Q=(T.fromPoints=function(e,t){if(M.defined(t)||(t=new T),M.defined(e)&&0!==e.length){for(var n=q.Cartesian3.clone(e[0],Y),r=q.Cartesian3.clone(n,B),a=q.Cartesian3.clone(n,V),i=q.Cartesian3.clone(n,k),s=q.Cartesian3.clone(n,L),o=q.Cartesian3.clone(n,j),u=q.Cartesian3.clone(n,W),l=e.length,c=1;c<l;c++){q.Cartesian3.clone(e[c],n);var d=n.x,f=n.y,p=n.z;d<r.x&&q.Cartesian3.clone(n,r),d>s.x&&q.Cartesian3.clone(n,s),f<a.y&&q.Cartesian3.clone(n,a),f>o.y&&q.Cartesian3.clone(n,o),p<i.z&&q.Cartesian3.clone(n,i),p>u.z&&q.Cartesian3.clone(n,u)}var h=q.Cartesian3.magnitudeSquared(q.Cartesian3.subtract(s,r,I)),m=q.Cartesian3.magnitudeSquared(q.Cartesian3.subtract(o,a,I)),y=q.Cartesian3.magnitudeSquared(q.Cartesian3.subtract(u,i,I)),A=r,C=s,g=h,w=(h<m&&(g=m,A=a,C=o),g<y&&(g=y,A=i,C=u),H),v=(w.x=.5*(A.x+C.x),w.y=.5*(A.y+C.y),w.z=.5*(A.z+C.z),q.Cartesian3.magnitudeSquared(q.Cartesian3.subtract(C,w,I))),x=Math.sqrt(v),h=J,m=(h.x=r.x,h.y=a.y,h.z=i.z,X),E=(m.x=s.x,m.y=o.y,m.z=u.z,q.Cartesian3.midpoint(h,m,G)),_=0;for(c=0;c<l;c++){q.Cartesian3.clone(e[c],n);var S,O=q.Cartesian3.magnitude(q.Cartesian3.subtract(n,E,I)),O=(_<O&&(_=O),q.Cartesian3.magnitudeSquared(q.Cartesian3.subtract(n,w,I)));v<O&&(v=(x=.5*(x+(O=Math.sqrt(O))))*x,w.x=(x*w.x+(S=O-x)*n.x)/O,w.y=(x*w.y+S*n.y)/O,w.z=(x*w.z+S*n.z)/O)}x<_?(q.Cartesian3.clone(w,t.center),t.radius=x):(q.Cartesian3.clone(E,t.center),t.radius=_)}else t.center=q.Cartesian3.clone(q.Cartesian3.ZERO,t.center),t.radius=0;return t},new N),K=new q.Cartesian3,$=new q.Cartesian3,ee=new q.Cartographic,te=new q.Cartographic,ne=(T.fromRectangle2D=function(e,t,n){return T.fromRectangleWithHeights2D(e,t,0,0,n)},T.fromRectangleWithHeights2D=function(e,t,n,r,a){var i;return M.defined(a)||(a=new T),M.defined(e)?(t=M.defaultValue(t,Q),q.Rectangle.southwest(e,ee),ee.height=n,q.Rectangle.northeast(e,te),te.height=r,n=t.project(ee,K),r=(e=t.project(te,$)).x-n.x,t=e.y-n.y,e=e.z-n.z,a.radius=.5*Math.sqrt(r*r+t*t+e*e),(i=a.center).x=n.x+.5*r,i.y=n.y+.5*t,i.z=n.z+.5*e):(a.center=q.Cartesian3.clone(q.Cartesian3.ZERO,a.center),a.radius=0),a},[]),re=(T.fromRectangle3D=function(e,t,n,r){return t=M.defaultValue(t,q.Ellipsoid.WGS84),n=M.defaultValue(n,0),M.defined(r)||(r=new T),M.defined(e)?(e=q.Rectangle.subsample(e,t,n,ne),T.fromPoints(e,r)):(r.center=q.Cartesian3.clone(q.Cartesian3.ZERO,r.center),r.radius=0,r)},T.fromVertices=function(e,t,n,r){if(M.defined(r)||(r=new T),M.defined(e)&&0!==e.length){t=M.defaultValue(t,q.Cartesian3.ZERO),n=M.defaultValue(n,3);for(var a=Y,i=(a.x=e[0]+t.x,a.y=e[1]+t.y,a.z=e[2]+t.z,q.Cartesian3.clone(a,B)),s=q.Cartesian3.clone(a,V),o=q.Cartesian3.clone(a,k),u=q.Cartesian3.clone(a,L),l=q.Cartesian3.clone(a,j),c=q.Cartesian3.clone(a,W),d=e.length,f=0;f<d;f+=n){var p=e[f]+t.x,h=e[f+1]+t.y,m=e[f+2]+t.z;a.x=p,a.y=h,a.z=m,p<i.x&&q.Cartesian3.clone(a,i),p>u.x&&q.Cartesian3.clone(a,u),h<s.y&&q.Cartesian3.clone(a,s),h>l.y&&q.Cartesian3.clone(a,l),m<o.z&&q.Cartesian3.clone(a,o),m>c.z&&q.Cartesian3.clone(a,c)}var y=q.Cartesian3.magnitudeSquared(q.Cartesian3.subtract(u,i,I)),A=q.Cartesian3.magnitudeSquared(q.Cartesian3.subtract(l,s,I)),C=q.Cartesian3.magnitudeSquared(q.Cartesian3.subtract(c,o,I)),g=i,w=u,v=y,x=(y<A&&(v=A,g=s,w=l),v<C&&(v=C,g=o,w=c),H),E=(x.x=.5*(g.x+w.x),x.y=.5*(g.y+w.y),x.z=.5*(g.z+w.z),q.Cartesian3.magnitudeSquared(q.Cartesian3.subtract(w,x,I))),_=Math.sqrt(E),y=J,A=(y.x=i.x,y.y=s.y,y.z=o.z,X),S=(A.x=u.x,A.y=l.y,A.z=c.z,q.Cartesian3.midpoint(y,A,G)),O=0;for(f=0;f<d;f+=n){a.x=e[f]+t.x,a.y=e[f+1]+t.y,a.z=e[f+2]+t.z;var R,b=q.Cartesian3.magnitude(q.Cartesian3.subtract(a,S,I)),b=(O<b&&(O=b),q.Cartesian3.magnitudeSquared(q.Cartesian3.subtract(a,x,I)));E<b&&(E=(_=.5*(_+(b=Math.sqrt(b))))*_,x.x=(_*x.x+(R=b-_)*a.x)/b,x.y=(_*x.y+R*a.y)/b,x.z=(_*x.z+R*a.z)/b)}_<O?(q.Cartesian3.clone(x,r.center),r.radius=_):(q.Cartesian3.clone(S,r.center),r.radius=O)}else r.center=q.Cartesian3.clone(q.Cartesian3.ZERO,r.center),r.radius=0;return r},T.fromEncodedCartesianVertices=function(e,t,n){if(M.defined(n)||(n=new T),M.defined(e)&&M.defined(t)&&e.length===t.length&&0!==e.length){for(var r=Y,a=(r.x=e[0]+t[0],r.y=e[1]+t[1],r.z=e[2]+t[2],q.Cartesian3.clone(r,B)),i=q.Cartesian3.clone(r,V),s=q.Cartesian3.clone(r,k),o=q.Cartesian3.clone(r,L),u=q.Cartesian3.clone(r,j),l=q.Cartesian3.clone(r,W),c=e.length,d=0;d<c;d+=3){var f=e[d]+t[d],p=e[d+1]+t[d+1],h=e[d+2]+t[d+2];r.x=f,r.y=p,r.z=h,f<a.x&&q.Cartesian3.clone(r,a),f>o.x&&q.Cartesian3.clone(r,o),p<i.y&&q.Cartesian3.clone(r,i),p>u.y&&q.Cartesian3.clone(r,u),h<s.z&&q.Cartesian3.clone(r,s),h>l.z&&q.Cartesian3.clone(r,l)}var m=q.Cartesian3.magnitudeSquared(q.Cartesian3.subtract(o,a,I)),y=q.Cartesian3.magnitudeSquared(q.Cartesian3.subtract(u,i,I)),A=q.Cartesian3.magnitudeSquared(q.Cartesian3.subtract(l,s,I)),C=a,g=o,w=m,v=(m<y&&(w=y,C=i,g=u),w<A&&(w=A,C=s,g=l),H),x=(v.x=.5*(C.x+g.x),v.y=.5*(C.y+g.y),v.z=.5*(C.z+g.z),q.Cartesian3.magnitudeSquared(q.Cartesian3.subtract(g,v,I))),E=Math.sqrt(x),m=J,y=(m.x=a.x,m.y=i.y,m.z=s.z,X),_=(y.x=o.x,y.y=u.y,y.z=l.z,q.Cartesian3.midpoint(m,y,G)),S=0;for(d=0;d<c;d+=3){r.x=e[d]+t[d],r.y=e[d+1]+t[d+1],r.z=e[d+2]+t[d+2];var O,R=q.Cartesian3.magnitude(q.Cartesian3.subtract(r,_,I)),R=(S<R&&(S=R),q.Cartesian3.magnitudeSquared(q.Cartesian3.subtract(r,v,I)));x<R&&(x=(E=.5*(E+(R=Math.sqrt(R))))*E,v.x=(E*v.x+(O=R-E)*r.x)/R,v.y=(E*v.y+O*r.y)/R,v.z=(E*v.z+O*r.z)/R)}E<S?(q.Cartesian3.clone(v,n.center),n.radius=E):(q.Cartesian3.clone(_,n.center),n.radius=S)}else n.center=q.Cartesian3.clone(q.Cartesian3.ZERO,n.center),n.radius=0;return n},T.fromCornerPoints=function(e,t,n){M.defined(n)||(n=new T);e=q.Cartesian3.midpoint(e,t,n.center);return n.radius=q.Cartesian3.distance(e,t),n},T.fromEllipsoid=function(e,t){return M.defined(t)||(t=new T),q.Cartesian3.clone(q.Cartesian3.ZERO,t.center),t.radius=e.maximumRadius,t},new q.Cartesian3),ae=(T.fromBoundingSpheres=function(e,t){if(M.defined(t)||(t=new T),M.defined(e)&&0!==e.length){var n=e.length;if(1===n)return T.clone(e[0],t);if(2===n)return T.union(e[0],e[1],t);for(var r=[],a=0;a<n;a++)r.push(e[a].center);var i=(t=T.fromPoints(r,t)).center,s=t.radius;for(a=0;a<n;a++)var o=e[a],s=Math.max(s,q.Cartesian3.distance(i,o.center,re)+o.radius);t.radius=s}else t.center=q.Cartesian3.clone(q.Cartesian3.ZERO,t.center),t.radius=0;return t},new q.Cartesian3),ie=new q.Cartesian3,se=new q.Cartesian3,oe=(T.fromOrientedBoundingBox=function(e,t){M.defined(t)||(t=new T);var n=e.halfAxes,r=q.Matrix3.getColumn(n,0,ae),a=q.Matrix3.getColumn(n,1,ie),n=q.Matrix3.getColumn(n,2,se);return q.Cartesian3.add(r,a,r),q.Cartesian3.add(r,n,r),t.center=q.Cartesian3.clone(e.center,t.center),t.radius=q.Cartesian3.magnitude(r),t},T.clone=function(e,t){if(M.defined(e))return M.defined(t)?(t.center=q.Cartesian3.clone(e.center,t.center),t.radius=e.radius,t):new T(e.center,e.radius)},T.packedLength=4,T.pack=function(e,t,n){n=M.defaultValue(n,0);var r=e.center;return t[n++]=r.x,t[n++]=r.y,t[n++]=r.z,t[n]=e.radius,t},T.unpack=function(e,t,n){t=M.defaultValue(t,0);var r=(n=M.defined(n)?n:new T).center;return r.x=e[t++],r.y=e[t++],r.z=e[t++],n.radius=e[t],n},new q.Cartesian3),ue=new q.Cartesian3,le=(T.union=function(e,t,n){M.defined(n)||(n=new T);var r=e.center,a=e.radius,i=t.center,s=t.radius,i=q.Cartesian3.subtract(i,r,oe),o=q.Cartesian3.magnitude(i);return o+s<=a?e.clone(n):o+a<=s?t.clone(n):(t=q.Cartesian3.multiplyByScalar(i,((e=.5*(a+o+s))-a)/o,ue),q.Cartesian3.add(t,r,t),q.Cartesian3.clone(t,n.center),n.radius=e),n},new q.Cartesian3),ce=(T.expand=function(e,t,n){n=T.clone(e,n);e=q.Cartesian3.magnitude(q.Cartesian3.subtract(t,n.center,le));return e>n.radius&&(n.radius=e),n},T.intersectPlane=function(e,t){var n=e.center,e=e.radius,r=t.normal,r=q.Cartesian3.dot(r,n)+t.distance;return r<-e?F.OUTSIDE:r<e?F.INTERSECTING:F.INSIDE},T.transform=function(e,t,n){return(n=M.defined(n)?n:new T).center=q.Matrix4.multiplyByPoint(t,e.center,n.center),n.radius=q.Matrix4.getMaximumScale(t)*e.radius,n},new q.Cartesian3),de=(T.distanceSquaredTo=function(e,t){t=q.Cartesian3.subtract(e.center,t,ce),t=q.Cartesian3.magnitude(t)-e.radius;return t<=0?0:t*t},T.transformWithoutScale=function(e,t,n){return(n=M.defined(n)?n:new T).center=q.Matrix4.multiplyByPoint(t,e.center,n.center),n.radius=e.radius,n},new q.Cartesian3),fe=(T.computePlaneDistances=function(e,t,n,r){M.defined(r)||(r=new z);t=q.Cartesian3.subtract(e.center,t,de),n=q.Cartesian3.dot(n,t);return r.start=n-e.radius,r.stop=n+e.radius,r},new q.Cartesian3),pe=new q.Cartesian3,he=new q.Cartesian3,me=new q.Cartesian3,ye=new q.Cartesian3,Ae=new q.Cartographic,Ce=new Array(8),ge=0;ge<8;++ge)Ce[ge]=new q.Cartesian3;var we,t,ve,xe,Ee,_e,Se,Oe,Re,be,qe,Me,Te,Ie,De,Pe,Ue,Ne,Fe=new N,s=(T.projectTo2D=function(e,t,n){for(var r=(t=M.defaultValue(t,Fe)).ellipsoid,a=e.center,e=e.radius,i=q.Cartesian3.equals(a,q.Cartesian3.ZERO)?q.Cartesian3.clone(q.Cartesian3.UNIT_X,fe):r.geodeticSurfaceNormal(a,fe),s=q.Cartesian3.cross(q.Cartesian3.UNIT_Z,i,pe),o=(q.Cartesian3.normalize(s,s),q.Cartesian3.cross(i,s,he)),e=(q.Cartesian3.normalize(o,o),q.Cartesian3.multiplyByScalar(i,e,i),q.Cartesian3.multiplyByScalar(o,e,o),q.Cartesian3.multiplyByScalar(s,e,s),q.Cartesian3.negate(o,ye)),u=q.Cartesian3.negate(s,me),l=Ce,c=l[0],d=(q.Cartesian3.add(i,o,c),q.Cartesian3.add(c,s,c),c=l[1],q.Cartesian3.add(i,o,c),q.Cartesian3.add(c,u,c),c=l[2],q.Cartesian3.add(i,e,c),q.Cartesian3.add(c,u,c),c=l[3],q.Cartesian3.add(i,e,c),q.Cartesian3.add(c,s,c),q.Cartesian3.negate(i,i),c=l[4],q.Cartesian3.add(i,o,c),q.Cartesian3.add(c,s,c),c=l[5],q.Cartesian3.add(i,o,c),q.Cartesian3.add(c,u,c),c=l[6],q.Cartesian3.add(i,e,c),q.Cartesian3.add(c,u,c),c=l[7],q.Cartesian3.add(i,e,c),q.Cartesian3.add(c,s,c),l.length),f=0;f<d;++f){var p=l[f],h=(q.Cartesian3.add(a,p,p),r.cartesianToCartographic(p,Ae));t.project(h,p)}o=(a=(n=T.fromPoints(l,n)).center).x,u=a.y,i=a.z;return a.x=i,a.y=o,a.z=u,n},T.isOccluded=function(e,t){return!t.isBoundingSphereVisible(e)},T.equals=function(e,t){return e===t||M.defined(e)&&M.defined(t)&&q.Cartesian3.equals(e.center,t.center)&&e.radius===t.radius},T.prototype.intersectPlane=function(e){return T.intersectPlane(this,e)},T.prototype.distanceSquaredTo=function(e){return T.distanceSquaredTo(this,e)},T.prototype.computePlaneDistances=function(e,t,n){return T.computePlaneDistances(this,e,t,n)},T.prototype.isOccluded=function(e){return T.isOccluded(this,e)},T.prototype.equals=function(e){return T.equals(this,e)},T.prototype.clone=function(e){return T.clone(this,e)},T.prototype.volume=function(){var e=this.radius;return Z*e*e*e},{requestFullscreen:void 0,exitFullscreen:void 0,fullscreenEnabled:void 0,fullscreenElement:void 0,fullscreenchange:void 0,fullscreenerror:void 0}),n={};function ze(e){for(var t=e.split("."),n=0,r=t.length;n<r;++n)t[n]=parseInt(t[n],10);return t}function Be(){var e;return M.defined(ve)||(ve=!1,je())||null!==(e=/ Chrome\/([\.0-9]+)/.exec(t.userAgent))&&(ve=!0,xe=ze(e[1])),ve}function Ve(){var e;return M.defined(Ee)||(Ee=!1,Be())||je()||!/ Safari\/[\.0-9]+/.test(t.userAgent)||null!==(e=/ Version\/([\.0-9]+)/.exec(t.userAgent))&&(Ee=!0,_e=ze(e[1])),Ee}function ke(){var e;return M.defined(Se)||(Se=!1,null!==(e=/ AppleWebKit\/([\.0-9]+)(\+?)/.exec(t.userAgent))&&(Se=!0,(Oe=ze(e[1])).isNightly=!!e[2])),Se}function Le(){var e;return M.defined(Re)||(Re=!1,"Microsoft Internet Explorer"===t.appName?null!==(e=/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(t.userAgent))&&(Re=!0,be=ze(e[1])):"Netscape"===t.appName&&null!==(e=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(t.userAgent))&&(Re=!0,be=ze(e[1]))),Re}function je(){var e;return M.defined(qe)||(qe=!1,null!==(e=/ Edge\/([\.0-9]+)/.exec(t.userAgent))&&(qe=!0,Me=ze(e[1]))),qe}function We(){var e;return M.defined(Te)||(Te=!1,null!==(e=/Firefox\/([\.0-9]+)/.exec(t.userAgent))&&(Te=!0,Ie=ze(e[1]))),Te}function Ye(){var e;return!M.defined(Ne)&&((e=document.createElement("canvas")).setAttribute("style","image-rendering: -moz-crisp-edges;image-rendering: pixelated;"),e=e.style.imageRendering,Ne=M.defined(e)&&""!==e)&&(Ue=e),Ne}function r(){return r._result}Object.defineProperties(n,{element:{get:function(){if(n.supportsFullscreen())return document[s.fullscreenElement]}},changeEventName:{get:function(){if(n.supportsFullscreen())return s.fullscreenchange}},errorEventName:{get:function(){if(n.supportsFullscreen())return s.fullscreenerror}},enabled:{get:function(){if(n.supportsFullscreen())return document[s.fullscreenEnabled]}},fullscreen:{get:function(){if(n.supportsFullscreen())return null!==n.element}}}),n.supportsFullscreen=function(){if(!M.defined(we)){we=!1;var e=document.body;if("function"==typeof e.requestFullscreen)return s.requestFullscreen="requestFullscreen",s.exitFullscreen="exitFullscreen",s.fullscreenEnabled="fullscreenEnabled",s.fullscreenElement="fullscreenElement",s.fullscreenchange="fullscreenchange",s.fullscreenerror="fullscreenerror",we=!0;for(var t=["webkit","moz","o","ms","khtml"],n=0,r=t.length;n<r;++n){var a,i=t[n];("function"==typeof e[a=i+"RequestFullscreen"]||"function"==typeof e[a=i+"RequestFullScreen"])&&(s.requestFullscreen=a,we=!0),a=i+"ExitFullscreen",("function"==typeof document[a]||(a=i+"CancelFullScreen","function"==typeof document[a]))&&(s.exitFullscreen=a),a=i+"FullscreenEnabled",(void 0!==document[a]||(a=i+"FullScreenEnabled",void 0!==document[a]))&&(s.fullscreenEnabled=a),a=i+"FullscreenElement",(void 0!==document[a]||(a=i+"FullScreenElement",void 0!==document[a]))&&(s.fullscreenElement=a),a=i+"fullscreenchange",void 0!==document["on"+a]&&(s.fullscreenchange=a="ms"===i?"MSFullscreenChange":a),a=i+"fullscreenerror",void 0!==document["on"+a]&&(s.fullscreenerror=a="ms"===i?"MSFullscreenError":a)}}return we},n.requestFullscreen=function(e,t){n.supportsFullscreen()&&e[s.requestFullscreen]({vrDisplay:t})},n.exitFullscreen=function(){n.supportsFullscreen()&&document[s.exitFullscreen]()},n._names=s,t="undefined"!=typeof navigator?navigator:{},r._promise=void 0,r._result=void 0,r.initialize=function(){var e,t;return M.defined(r._promise)?r._promise:(e=M.when.defer(),r._promise=e.promise,je()?(r._result=!1,e.resolve(r._result)):((t=new Image).onload=function(){r._result=0<t.width&&0<t.height,e.resolve(r._result)},t.onerror=function(){r._result=!1,e.resolve(r._result)},t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA"),e.promise)},Object.defineProperties(r,{initialized:{get:function(){return M.defined(r._result)}}});var a=[],i=("undefined"!=typeof ArrayBuffer&&(a.push(Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array),"undefined"!=typeof Uint8ClampedArray&&a.push(Uint8ClampedArray),"undefined"!=typeof Uint8ClampedArray&&a.push(Uint8ClampedArray),"undefined"!=typeof BigInt64Array&&a.push(BigInt64Array),"undefined"!=typeof BigUint64Array)&&a.push(BigUint64Array),{isChrome:Be,chromeVersion:function(){return Be()&&xe},isSafari:Ve,safariVersion:function(){return Ve()&&_e},isWebkit:ke,webkitVersion:function(){return ke()&&Oe},isInternetExplorer:Le,internetExplorerVersion:function(){return Le()&&be},isEdge:je,edgeVersion:function(){return je()&&Me},isFirefox:We,firefoxVersion:function(){return We()&&Ie},isWindows:function(){return De=M.defined(De)?De:/Windows/i.test(t.appVersion)},hardwareConcurrency:M.defaultValue(t.hardwareConcurrency,3),supportsPointerEvents:function(){return Pe=M.defined(Pe)?Pe:!We()&&"undefined"!=typeof PointerEvent&&(!M.defined(t.pointerEnabled)||t.pointerEnabled)},supportsImageRenderingPixelated:Ye,supportsWebP:r,imageRenderingValue:function(){return Ye()?Ue:void 0},typedArrayTypes:a});function d(e,t,n,r){this.x=M.defaultValue(e,0),this.y=M.defaultValue(t,0),this.z=M.defaultValue(n,0),this.w=M.defaultValue(r,0)}i.supportsBasis=function(e){return i.supportsWebAssembly()&&e.context.supportsBasis},i.supportsFullscreen=function(){return n.supportsFullscreen()},i.supportsTypedArrays=function(){return"undefined"!=typeof ArrayBuffer},i.supportsBigInt64Array=function(){return"undefined"!=typeof BigInt64Array},i.supportsBigUint64Array=function(){return"undefined"!=typeof BigUint64Array},i.supportsBigInt=function(){return"undefined"!=typeof BigInt},i.supportsWebWorkers=function(){return"undefined"!=typeof Worker},i.supportsWebAssembly=function(){return"undefined"!=typeof WebAssembly&&!i.isEdge()};for(var He,Je,Xe=new q.Cartesian3,Ge=(d.fromAxisAngle=function(e,t,n){var t=t/2,r=Math.sin(t),e=(Xe=q.Cartesian3.normalize(e,Xe)).x*r,a=Xe.y*r,r=Xe.z*r,t=Math.cos(t);return M.defined(n)?(n.x=e,n.y=a,n.z=r,n.w=t,n):new d(e,a,r,t)},[1,2,0]),Ze=new Array(3),Qe=(d.fromRotationMatrix=function(e,t){var n,r,a,i,s=e[q.Matrix3.COLUMN0ROW0],o=e[q.Matrix3.COLUMN1ROW1],u=e[q.Matrix3.COLUMN2ROW2],l=s+o+u,u=0<l?(a=.5*(i=Math.sqrt(l+1)),n=(e[q.Matrix3.COLUMN1ROW2]-e[q.Matrix3.COLUMN2ROW1])*(i=.5/i),r=(e[q.Matrix3.COLUMN2ROW0]-e[q.Matrix3.COLUMN0ROW2])*i,(e[q.Matrix3.COLUMN0ROW1]-e[q.Matrix3.COLUMN1ROW0])*i):(s=Ge[u=Ge[l=s<u&&o<u?2:s<o?1:0]],i=Math.sqrt(e[q.Matrix3.getElementIndex(l,l)]-e[q.Matrix3.getElementIndex(u,u)]-e[q.Matrix3.getElementIndex(s,s)]+1),(o=Ze)[l]=.5*i,i=.5/i,a=(e[q.Matrix3.getElementIndex(s,u)]-e[q.Matrix3.getElementIndex(u,s)])*i,o[u]=(e[q.Matrix3.getElementIndex(u,l)]+e[q.Matrix3.getElementIndex(l,u)])*i,o[s]=(e[q.Matrix3.getElementIndex(s,l)]+e[q.Matrix3.getElementIndex(l,s)])*i,n=-o[0],r=-o[1],-o[2]);return M.defined(t)?(t.x=n,t.y=r,t.z=u,t.w=a,t):new d(n,r,u,a)},new d),Ke=(new d,new d,new d,d.fromHeadingPitchRoll=function(e,t){return Je=d.fromAxisAngle(q.Cartesian3.UNIT_X,e.roll,Qe),He=d.fromAxisAngle(q.Cartesian3.UNIT_Y,-e.pitch,t),t=d.multiply(He,Je,He),Je=d.fromAxisAngle(q.Cartesian3.UNIT_Z,-e.heading,Qe),d.multiply(Je,t,t)},new q.Cartesian3),$e=new q.Cartesian3,u=new d,et=new d,tt=new d,nt=(d.packedLength=4,d.pack=function(e,t,n){return n=M.defaultValue(n,0),t[n++]=e.x,t[n++]=e.y,t[n++]=e.z,t[n]=e.w,t},d.unpack=function(e,t,n){return t=M.defaultValue(t,0),(n=M.defined(n)?n:new d).x=e[t],n.y=e[t+1],n.z=e[t+2],n.w=e[t+3],n},d.packedInterpolationLength=3,d.convertPackedArrayForInterpolation=function(e,t,n,r){d.unpack(e,4*n,tt),d.conjugate(tt,tt);for(var a=0,i=n-t+1;a<i;a++){var s=3*a,o=(d.unpack(e,4*(t+a),u),d.multiply(u,tt,u),u.w<0&&d.negate(u,u),d.computeAxis(u,Ke),d.computeAngle(u));(r=M.defined(r)?r:[])[s]=Ke.x*o,r[1+s]=Ke.y*o,r[2+s]=Ke.z*o}},d.unpackInterpolationResult=function(e,t,n,r,a){M.defined(a)||(a=new d),q.Cartesian3.fromArray(e,0,$e);e=q.Cartesian3.magnitude($e);return d.unpack(t,4*r,et),0===e?d.clone(d.IDENTITY,u):d.fromAxisAngle($e,e,u),d.multiply(u,et,a)},d.clone=function(e,t){if(M.defined(e))return M.defined(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new d(e.x,e.y,e.z,e.w)},d.conjugate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=e.w,t},d.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},d.magnitude=function(e){return Math.sqrt(d.magnitudeSquared(e))},d.normalize=function(e,t){var n=1/d.magnitude(e),r=e.x*n,a=e.y*n,i=e.z*n,e=e.w*n;return t.x=r,t.y=a,t.z=i,t.w=e,t},d.inverse=function(e,t){var n=d.magnitudeSquared(e);return t=d.conjugate(e,t),d.multiplyByScalar(t,1/n,t)},d.add=function(e,t,n){return n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z,n.w=e.w+t.w,n},d.subtract=function(e,t,n){return n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z,n.w=e.w-t.w,n},d.negate=function(e,t){return t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},d.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},d.multiply=function(e,t,n){var r=e.x,a=e.y,i=e.z,e=e.w,s=t.x,o=t.y,u=t.z,t=t.w,l=e*o-r*u+a*t+i*s,c=e*u+r*o-a*s+i*t,d=e*t-r*s-a*o-i*u;return n.x=e*s+r*t+a*u-i*o,n.y=l,n.z=c,n.w=d,n},d.multiplyByScalar=function(e,t,n){return n.x=e.x*t,n.y=e.y*t,n.z=e.z*t,n.w=e.w*t,n},d.divideByScalar=function(e,t,n){return n.x=e.x/t,n.y=e.y/t,n.z=e.z/t,n.w=e.w/t,n},d.computeAxis=function(e,t){var n=e.w;return Math.abs(n-1)<c.CesiumMath.EPSILON6?t.x=t.y=t.z=0:(n=1/Math.sqrt(1-n*n),t.x=e.x*n,t.y=e.y*n,t.z=e.z*n),t},d.computeAngle=function(e){return Math.abs(e.w-1)<c.CesiumMath.EPSILON6?0:2*Math.acos(e.w)},new d),rt=(d.lerp=function(e,t,n,r){return nt=d.multiplyByScalar(t,n,nt),r=d.multiplyByScalar(e,1-n,r),d.add(nt,r,r)},new d),at=new d,it=new d,st=(d.slerp=function(e,t,n,r){var a=d.dot(e,t),i=t;return a<0&&(a=-a,i=rt=d.negate(t,rt)),1-a<c.CesiumMath.EPSILON6?d.lerp(e,i,n,r):(t=Math.acos(a),at=d.multiplyByScalar(e,Math.sin((1-n)*t),at),it=d.multiplyByScalar(i,Math.sin(n*t),it),r=d.add(at,it,r),d.multiplyByScalar(r,1/Math.sin(t),r))},d.log=function(e,t){var n=c.CesiumMath.acosClamped(e.w),r=0;return 0!==n&&(r=n/Math.sin(n)),q.Cartesian3.multiplyByScalar(e,r,t)},d.exp=function(e,t){var n=q.Cartesian3.magnitude(e),r=0;return 0!==n&&(r=Math.sin(n)/n),t.x=e.x*r,t.y=e.y*r,t.z=e.z*r,t.w=Math.cos(n),t},new q.Cartesian3),ot=new q.Cartesian3,ut=new d,lt=new d,ct=(d.computeInnerQuadrangle=function(e,t,n,r){var a=d.conjugate(t,ut),n=(d.multiply(a,n,lt),d.log(lt,st)),a=(d.multiply(a,e,lt),d.log(lt,ot));return q.Cartesian3.add(n,a,n),q.Cartesian3.multiplyByScalar(n,.25,n),q.Cartesian3.negate(n,n),d.exp(n,ut),d.multiply(t,ut,r)},d.squad=function(e,t,n,r,a,i){e=d.slerp(e,t,a,ut),t=d.slerp(n,r,a,lt);return d.slerp(e,t,2*a*(1-a),i)},new d),a=1.9011074535173003,dt=i.supportsTypedArrays()?new Float32Array(8):[],ft=i.supportsTypedArrays()?new Float32Array(8):[],f=i.supportsTypedArrays()?new Float32Array(8):[],p=i.supportsTypedArrays()?new Float32Array(8):[],pt=0;pt<7;++pt){var ht=pt+1,mt=2*ht+1;dt[pt]=1/(ht*mt),ft[pt]=ht/mt}function yt(e,t,n){for(var r,a,i=0,s=e.length-1;i<=s;)if((a=n(e[r=~~((i+s)/2)],t))<0)i=1+r;else{if(!(0<a))return r;s=r-1}return~(s+1)}function At(e,t,n,r,a){this.xPoleWander=e,this.yPoleWander=t,this.xPoleOffset=n,this.yPoleOffset=r,this.ut1MinusUtc=a}function Ct(){function g(e,t,n,r,a,i,s){var o=e>>>0;return e=(n=n&&o&&{2:"0b",8:"0",16:"0x"}[t]||"")+E(o.toString(t),i||0,"0",!1),_(e,n,r,a,s)}function w(e,t,n,r,a,i){return null!=r&&(e=e.slice(0,r)),_(e,"",t,n,a,i)}var v=arguments,x=0,e=v[x++],E=function(e,t,n,r){n=n||" ";t=e.length>=t?"":Array(1+t-e.length>>>0).join(n);return r?e+t:t+e},_=function(e,t,n,r,a,i){var s=r-e.length;return e=0<s?n||!a?E(e,r,i,n):e.slice(0,t.length)+E("",s,"0",!0)+e.slice(t.length):e};return e.replace(/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,function(e,t,n,r,a,i,s){var o,u,l,c,d;if("%%"==e)return"%";for(var f=!1,p="",h=!1,m=!1,y=" ",A=n.length,C=0;n&&C<A;C++)switch(n.charAt(C)){case" ":p=" ";break;case"+":p="+";break;case"-":f=!0;break;case"'":y=n.charAt(C+1);break;case"0":h=!0;break;case"#":m=!0}if((r=r?"*"==r?+v[x++]:"*"==r.charAt(0)?+v[r.slice(1,-1)]:+r:0)<0&&(r=-r,f=!0),!isFinite(r))throw new Error("sprintf: (minimum-)width must be finite");switch(i=i?"*"==i?+v[x++]:"*"==i.charAt(0)?+v[i.slice(1,-1)]:+i:-1<"fFeE".indexOf(s)?6:"d"==s?0:void 0,d=t?v[t.slice(0,-1)]:v[x++],s){case"s":return w(String(d),f,r,i,h,y);case"c":return w(String.fromCharCode(+d),f,r,i,h);case"b":return g(d,2,m,f,r,i,h);case"o":return g(d,8,m,f,r,i,h);case"x":return g(d,16,m,f,r,i,h);case"X":return g(d,16,m,f,r,i,h).toUpperCase();case"u":return g(d,10,m,f,r,i,h);case"i":case"d":return o=+d||0,d=(u=(o=Math.round(o-o%1))<0?"-":p)+E(String(Math.abs(o)),i,"0",!1),_(d,u,f,r,h);case"e":case"E":case"f":case"F":case"g":case"G":return u=(o=+d)<0?"-":p,l=["toExponential","toFixed","toPrecision"]["efg".indexOf(s.toLowerCase())],c=["toString","toUpperCase"]["eEfFgG".indexOf(s)%2],d=u+Math.abs(o)[l](i),_(d,u,f,r,h)[c]();default:return e}})}function gt(e,t,n,r,a,i,s,o){this.year=e,this.month=t,this.day=n,this.hour=r,this.minute=a,this.second=i,this.millisecond=s,this.isLeapSecond=o}function wt(e){return e%4==0&&e%100!=0||e%400==0}function g(e,t){this.julianDate=e,this.offset=t}dt[7]=a/136,ft[7]=8*a/17,d.fastSlerp=function(e,t,n,r){for(var a=d.dot(e,t),i=(0<=a?l=1:(l=-1,a=-a),a-1),a=1-n,s=n*n,o=a*a,u=7;0<=u;--u)f[u]=(dt[u]*s-ft[u])*i,p[u]=(dt[u]*o-ft[u])*i;var l=l*n*(1+f[0]*(1+f[1]*(1+f[2]*(1+f[3]*(1+f[4]*(1+f[5]*(1+f[6]*(1+f[7])))))))),n=a*(1+p[0]*(1+p[1]*(1+p[2]*(1+p[3]*(1+p[4]*(1+p[5]*(1+p[6]*(1+p[7])))))))),a=d.multiplyByScalar(e,n,ct);return d.multiplyByScalar(t,l,r),d.add(a,r,r)},d.fastSquad=function(e,t,n,r,a,i){e=d.fastSlerp(e,t,a,ut),t=d.fastSlerp(n,r,a,lt);return d.fastSlerp(e,t,2*a*(1-a),i)},d.equals=function(e,t){return e===t||M.defined(e)&&M.defined(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},d.equalsEpsilon=function(e,t,n){return n=M.defaultValue(n,0),e===t||M.defined(e)&&M.defined(t)&&Math.abs(e.x-t.x)<=n&&Math.abs(e.y-t.y)<=n&&Math.abs(e.z-t.z)<=n&&Math.abs(e.w-t.w)<=n},d.ZERO=Object.freeze(new d(0,0,0,0)),d.IDENTITY=Object.freeze(new d(0,0,0,1)),d.prototype.clone=function(e){return d.clone(this,e)},d.prototype.equals=function(e){return d.equals(this,e)},d.prototype.equalsEpsilon=function(e,t){return d.equalsEpsilon(this,e,t)},d.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"};var w=Object.freeze({SECONDS_PER_MILLISECOND:.001,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,SECONDS_PER_HOUR:3600,MINUTES_PER_DAY:1440,SECONDS_PER_DAY:86400,DAYS_PER_JULIAN_CENTURY:36525,PICOSECOND:1e-9,MODIFIED_JULIAN_DATE_DIFFERENCE:2400000.5}),v=Object.freeze({UTC:0,TAI:1}),vt=new gt,xt=[31,28,31,30,31,30,31,31,30,31,30,31];function Et(e,t){return x.compare(e.julianDate,t.julianDate)}var _t=new g;function St(e){_t.julianDate=e;var t=x.leapSeconds,n=yt(t,_t,Et),r=t[n=(n=n<0?~n:n)>=t.length?t.length-1:n].offset;0<n&&r<x.secondsDifference(t[n].julianDate,e)&&(r=t[--n].offset),x.addSeconds(e,r,e)}function Ot(e,t){_t.julianDate=e;var n,r=x.leapSeconds,a=yt(r,_t,Et);return 0===(a=a<0?~a:a)?x.addSeconds(e,-r[0].offset,t):a>=r.length?x.addSeconds(e,-r[a-1].offset,t):0===(n=x.secondsDifference(r[a].julianDate,e))?x.addSeconds(e,-r[a].offset,t):n<=1?void 0:x.addSeconds(e,-r[--a].offset,t)}function Rt(e,t,n){var r=t/w.SECONDS_PER_DAY|0;return e+=r,(t-=w.SECONDS_PER_DAY*r)<0&&(e--,t+=w.SECONDS_PER_DAY),n.dayNumber=e,n.secondsOfDay=t,n}function bt(e,t,n,r,a,i,s){var o=(t-14)/12|0,e=e+4800+o,t=(1461*e/4|0)+(367*(t-2-12*o)/12|0)-(3*((e+100)/100|0)/4|0)+n-32075,o=((r-=12)<0&&(r+=24),i+(r*w.SECONDS_PER_HOUR+a*w.SECONDS_PER_MINUTE+s*w.SECONDS_PER_MILLISECOND));return 43200<=o&&--t,[t,o]}var qt=/^(\d{4})$/,Mt=/^(\d{4})-(\d{2})$/,Tt=/^(\d{4})-?(\d{3})$/,It=/^(\d{4})-?W(\d{2})-?(\d{1})?$/,Dt=/^(\d{4})-?(\d{2})-?(\d{2})$/,a=/([Z+\-])?(\d{2})?:?(\d{2})?$/,Pt=/^(\d{2})(\.\d+)?/.source+a.source,Ut=/^(\d{2}):?(\d{2})(\.\d+)?/.source+a.source,Nt=/^(\d{2}):?(\d{2}):?(\d{2})(\.\d+)?/.source+a.source;function x(e,t,n){this.dayNumber=void 0,this.secondsOfDay=void 0,e=M.defaultValue(e,0),t=M.defaultValue(t,0),n=M.defaultValue(n,v.UTC);var r=0|e;Rt(r,t+=(e-r)*w.SECONDS_PER_DAY,this),n===v.UTC&&St(this)}x.fromGregorianDate=function(e,t){e=bt(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond);return M.defined(t)?(Rt(e[0],e[1],t),St(t),t):new x(e[0],e[1],v.UTC)},x.fromDate=function(e,t){e=bt(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return M.defined(t)?(Rt(e[0],e[1],t),St(t),t):new x(e[0],e[1],v.UTC)},x.fromIso8601=function(e,t){var n,r,a,i,e=(e=e.replace(",",".")).split("T"),s=1,o=1,u=0,l=0,c=0,d=0,f=e[0],p=e[1];if(null!==(e=f.match(Dt))?(a=+e[1],s=+e[2],o=+e[3]):null!==(e=f.match(Mt))?(a=+e[1],s=+e[2]):null!==(e=f.match(qt))?a=+e[1]:(null!==(e=f.match(Tt))?(a=+e[1],y=+e[2],r=wt(a)):null!==(e=f.match(It))&&(a=+e[1],y=7*+e[2]+(+e[3]||0)-new Date(Date.UTC(a,0,4)).getUTCDay()-3),(n=new Date(Date.UTC(a,0,1))).setUTCDate(y),s=n.getUTCMonth()+1,o=n.getUTCDate()),r=wt(a),M.defined(p)){null!==(e=p.match(Nt))?(u=+e[1],l=+e[2],c=+e[3],d=1e3*+(e[4]||0),i=5):null!==(e=p.match(Ut))?(u=+e[1],l=+e[2],c=60*+(e[3]||0),i=4):null!==(e=p.match(Pt))&&(u=+e[1],l=60*+(e[2]||0),i=3);var f=e[i],h=+e[i+1],m=+(e[i+2]||0);switch(f){case"+":u-=h,l-=m;break;case"-":u+=h,l+=m;break;case"Z":break;default:l+=new Date(Date.UTC(a,s-1,o,u,l)).getTimezoneOffset()}}var y=60===c;for(y&&c--;60<=l;)l-=60,u++;for(;24<=u;)u-=24,o++;for(n=r&&2===s?29:xt[s-1];n<o;)o-=n,12<++s&&(s-=12,a++),n=r&&2===s?29:xt[s-1];for(;l<0;)l+=60,u--;for(;u<0;)u+=24,o--;for(;o<1;)--s<1&&(s+=12,a--),o+=n=r&&2===s?29:xt[s-1];p=bt(a,s,o,u,l,c,d);return M.defined(t)?(Rt(p[0],p[1],t),St(t)):t=new x(p[0],p[1],v.UTC),y&&x.addSeconds(t,1,t),t},x.now=function(e){return x.fromDate(new Date,e)};var Ft=new x(0,0,v.TAI);function o(e){e instanceof o?(this.scheme=e.scheme,this.authority=e.authority,this.path=e.path,this.query=e.query,this.fragment=e.fragment):e&&(e=zt.exec(e),this.scheme=e[1],this.authority=e[2],this.path=e[3],this.query=e[4],this.fragment=e[5])}x.toGregorianDate=function(e,t){var n=!1,r=Ot(e,Ft),e=(M.defined(r)||(x.addSeconds(e,-1,Ft),r=Ot(Ft,Ft),n=!0),r.dayNumber),r=r.secondsOfDay,e=(43200<=r&&(e+=1),e+68569|0),a=4*e/146097|0,i=4e3*(1+(e=e-((146097*a+3)/4|0)|0))/1461001|0,s=80*(e=e-(1461*i/4|0)+31|0)/2447|0,o=e-(2447*s/80|0)|0,s=2+s-12*(e=s/11|0)|0,a=100*(a-49)+i+e|0,i=r/w.SECONDS_PER_HOUR|0,e=r-i*w.SECONDS_PER_HOUR,r=e/w.SECONDS_PER_MINUTE|0,u=0|(e-=r*w.SECONDS_PER_MINUTE),e=(e-u)/w.SECONDS_PER_MILLISECOND;return 23<(i+=12)&&(i-=24),n&&(u+=1),M.defined(t)?(t.year=a,t.month=s,t.day=o,t.hour=i,t.minute=r,t.second=u,t.millisecond=e,t.isLeapSecond=n,t):new gt(a,s,o,i,r,u,e,n)},x.toDate=function(e){var e=x.toGregorianDate(e,vt),t=e.second;return e.isLeapSecond&&--t,new Date(Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,t,e.millisecond))},x.toIso8601=function(e,t){var e=x.toGregorianDate(e,vt),n=e.year,r=e.month,a=e.day,i=e.hour,s=e.minute,o=e.second,e=e.millisecond;return 1e4===n&&1===r&&1===a&&0===i&&0===s&&0===o&&0===e&&(n=9999,r=12,a=31,i=24),M.defined(t)||0===e?M.defined(t)&&0!==t?Ct("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",n,r,a,i,s,o,(.01*e).toFixed(t).replace(".","").slice(0,t)):Ct("%04d-%02d-%02dT%02d:%02d:%02dZ",n,r,a,i,s,o):Ct("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",n,r,a,i,s,o,(.01*e).toString().replace(".",""))},x.clone=function(e,t){if(M.defined(e))return M.defined(t)?(t.dayNumber=e.dayNumber,t.secondsOfDay=e.secondsOfDay,t):new x(e.dayNumber,e.secondsOfDay,v.TAI)},x.compare=function(e,t){var n=e.dayNumber-t.dayNumber;return 0!=n?n:e.secondsOfDay-t.secondsOfDay},x.equals=function(e,t){return e===t||M.defined(e)&&M.defined(t)&&e.dayNumber===t.dayNumber&&e.secondsOfDay===t.secondsOfDay},x.equalsEpsilon=function(e,t,n){return n=M.defaultValue(n,0),e===t||M.defined(e)&&M.defined(t)&&Math.abs(x.secondsDifference(e,t))<=n},x.totalDays=function(e){return e.dayNumber+e.secondsOfDay/w.SECONDS_PER_DAY},x.secondsDifference=function(e,t){return(e.dayNumber-t.dayNumber)*w.SECONDS_PER_DAY+(e.secondsOfDay-t.secondsOfDay)},x.daysDifference=function(e,t){return e.dayNumber-t.dayNumber+(e.secondsOfDay-t.secondsOfDay)/w.SECONDS_PER_DAY},x.computeTaiMinusUtc=function(e){_t.julianDate=e;var e=x.leapSeconds,t=yt(e,_t,Et);return e[t=t<0&&(t=~t,--t<0)?0:t].offset},x.addSeconds=function(e,t,n){return Rt(e.dayNumber,e.secondsOfDay+t,n)},x.addMinutes=function(e,t,n){t=e.secondsOfDay+t*w.SECONDS_PER_MINUTE;return Rt(e.dayNumber,t,n)},x.addHours=function(e,t,n){t=e.secondsOfDay+t*w.SECONDS_PER_HOUR;return Rt(e.dayNumber,t,n)},x.addDays=function(e,t,n){return Rt(e.dayNumber+t,e.secondsOfDay,n)},x.lessThan=function(e,t){return x.compare(e,t)<0},x.lessThanOrEquals=function(e,t){return x.compare(e,t)<=0},x.greaterThan=function(e,t){return 0<x.compare(e,t)},x.greaterThanOrEquals=function(e,t){return 0<=x.compare(e,t)},x.prototype.clone=function(e){return x.clone(this,e)},x.prototype.equals=function(e){return x.equals(this,e)},x.prototype.equalsEpsilon=function(e,t){return x.equalsEpsilon(this,e,t)},x.prototype.toString=function(){return x.toIso8601(this)},x.leapSeconds=[new g(new x(2441317,43210,v.TAI),10),new g(new x(2441499,43211,v.TAI),11),new g(new x(2441683,43212,v.TAI),12),new g(new x(2442048,43213,v.TAI),13),new g(new x(2442413,43214,v.TAI),14),new g(new x(2442778,43215,v.TAI),15),new g(new x(2443144,43216,v.TAI),16),new g(new x(2443509,43217,v.TAI),17),new g(new x(2443874,43218,v.TAI),18),new g(new x(2444239,43219,v.TAI),19),new g(new x(2444786,43220,v.TAI),20),new g(new x(2445151,43221,v.TAI),21),new g(new x(2445516,43222,v.TAI),22),new g(new x(2446247,43223,v.TAI),23),new g(new x(2447161,43224,v.TAI),24),new g(new x(2447892,43225,v.TAI),25),new g(new x(2448257,43226,v.TAI),26),new g(new x(2448804,43227,v.TAI),27),new g(new x(2449169,43228,v.TAI),28),new g(new x(2449534,43229,v.TAI),29),new g(new x(2450083,43230,v.TAI),30),new g(new x(2450630,43231,v.TAI),31),new g(new x(2451179,43232,v.TAI),32),new g(new x(2453736,43233,v.TAI),33),new g(new x(2454832,43234,v.TAI),34),new g(new x(2456109,43235,v.TAI),35),new g(new x(2457204,43236,v.TAI),36),new g(new x(2457754,43237,v.TAI),37)],o.prototype.scheme=null,o.prototype.authority=null,o.prototype.path="",o.prototype.query=null,o.prototype.fragment=null;var zt=new RegExp("^(?:([^:/?#]+):)?(?://([^/?#]*))?([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$"),Bt=(o.prototype.getScheme=function(){return this.scheme},o.prototype.getAuthority=function(){return this.authority},o.prototype.getPath=function(){return this.path},o.prototype.getQuery=function(){return this.query},o.prototype.getFragment=function(){return this.fragment},o.prototype.isAbsolute=function(){return!!this.scheme&&!this.fragment},o.prototype.isSameDocumentAs=function(e){return e.scheme==this.scheme&&e.authority==this.authority&&e.path==this.path&&e.query==this.query},o.prototype.equals=function(e){return this.isSameDocumentAs(e)&&e.fragment==this.fragment},o.prototype.normalize=function(){this.removeDotSegments(),this.scheme&&(this.scheme=this.scheme.toLowerCase()),this.authority&&(this.authority=this.authority.replace(kt,jt).replace(Bt,Lt)),this.path&&(this.path=this.path.replace(Bt,Lt)),this.query&&(this.query=this.query.replace(Bt,Lt)),this.fragment&&(this.fragment=this.fragment.replace(Bt,Lt))},/%[0-9a-z]{2}/gi),Vt=/[a-zA-Z0-9\-\._~]/,kt=/(.*@)?([^@:]*)(:.*)?/;function Lt(e){var t=unescape(e);return Vt.test(t)?t:e.toUpperCase()}function jt(e,t,n,r){return(t||"")+n.toLowerCase()+(r||"")}function Wt(e,t){if(null===e||"object"!=typeof e)return e;t=M.defaultValue(t,!1);var n,r,a=new e.constructor;for(n in e)e.hasOwnProperty(n)&&(r=e[n],t&&(r=Wt(r,t)),a[n]=r);return a}function Yt(e,t){var n;return"undefined"!=typeof document&&(n=document),Yt._implementation(e,t,n)}o.prototype.resolve=function(e){var t=new o;return this.scheme?(t.scheme=this.scheme,t.authority=this.authority,t.path=this.path,t.query=this.query):(t.scheme=e.scheme,this.authority?(t.authority=this.authority,t.path=this.path,t.query=this.query):(t.authority=e.authority,""==this.path?(t.path=e.path,t.query=this.query||e.query):("/"==this.path.charAt(0)?t.path=this.path:e.authority&&""==e.path?t.path="/"+this.path:t.path=e.path.substring(0,e.path.lastIndexOf("/")+1)+this.path,t.removeDotSegments(),t.query=this.query))),t.fragment=this.fragment,t},o.prototype.removeDotSegments=function(){var e,t=this.path.split("/"),n=[],r=""==t[0];for(r&&t.shift(),""==t[0]&&t.shift();t.length;)".."==(e=t.shift())?n.pop():"."!=e&&n.push(e);"."!=e&&".."!=e||n.push(""),r&&n.unshift(""),this.path=n.join("/")},o.prototype.toString=function(){var e="";return this.scheme&&(e+=this.scheme+":"),this.authority&&(e+="//"+this.authority),e+=this.path,this.query&&(e+="?"+this.query),this.fragment&&(e+="#"+this.fragment),e},Yt._implementation=function(e,t,n){if(!M.defined(t)){if(void 0===n)return e;t=M.defaultValue(n.baseURI,n.location.href)}n=new o(t);return new o(e).resolve(n).toString()};var l,Ht=/^blob:/i;function Jt(e){return Ht.test(e)}var Xt=/^data:/i;function Gt(e){return Xt.test(e)}var h=Object.freeze({UNISSUED:0,ISSUED:1,ACTIVE:2,RECEIVED:3,CANCELLED:4,FAILED:5}),Zt=Object.freeze({TERRAIN:0,IMAGERY:1,TILES3D:2,OTHER:3});function Qt(e){e=M.defaultValue(e,M.defaultValue.EMPTY_OBJECT);var t=M.defaultValue(e.throttleByServer,!1),n=M.defaultValue(e.throttle,!1);this.url=e.url,this.requestFunction=e.requestFunction,this.cancelFunction=e.cancelFunction,this.priorityFunction=e.priorityFunction,this.priority=M.defaultValue(e.priority,0),this.throttle=n,this.throttleByServer=t,this.type=M.defaultValue(e.type,Zt.OTHER),this.serverKey=void 0,this.state=h.UNISSUED,this.deferred=void 0,this.cancelled=!1}function Kt(e,t,n){this.statusCode=e,this.response=t,this.responseHeaders=n,"string"==typeof this.responseHeaders&&(this.responseHeaders=function(e){var t={};if(e)for(var n=e.split("\r\n"),r=0;r<n.length;++r){var a,i=n[r],s=i.indexOf(": ");0<s&&(a=i.substring(0,s),i=i.substring(s+2),t[a]=i)}return t}(this.responseHeaders))}function $t(){this._listeners=[],this._scopes=[],this._toRemove=[],this._insideRaiseEvent=!1}function en(e,t){return t-e}function tn(e){this._comparator=e.comparator,this._array=[],this._length=0,this._maximumLength=void 0}function nn(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}Qt.prototype.cancel=function(){this.cancelled=!0},Qt.prototype.clone=function(e){return M.defined(e)?(e.url=this.url,e.requestFunction=this.requestFunction,e.cancelFunction=this.cancelFunction,e.priorityFunction=this.priorityFunction,e.priority=this.priority,e.throttle=this.throttle,e.throttleByServer=this.throttleByServer,e.type=this.type,e.serverKey=this.serverKey,e.state=this.RequestState.UNISSUED,e.deferred=void 0,e.cancelled=!1,e):new Qt(this)},Kt.prototype.toString=function(){var e="Request has failed.";return M.defined(this.statusCode)&&(e+=" Status Code: "+this.statusCode),e},Object.defineProperties($t.prototype,{numberOfListeners:{get:function(){return this._listeners.length-this._toRemove.length}}}),$t.prototype.addEventListener=function(e,t){this._listeners.push(e),this._scopes.push(t);var n=this;return function(){n.removeEventListener(e,t)}},$t.prototype.removeEventListener=function(e,t){for(var n=this._listeners,r=this._scopes,a=-1,i=0;i<n.length;i++)if(n[i]===e&&r[i]===t){a=i;break}return-1!==a&&(this._insideRaiseEvent?(this._toRemove.push(a),n[a]=void 0,r[a]=void 0):(n.splice(a,1),r.splice(a,1)),!0)},$t.prototype.raiseEvent=function(){this._insideRaiseEvent=!0;for(var e=this._listeners,t=this._scopes,n=e.length,r=0;r<n;r++){var a=e[r];M.defined(a)&&e[r].apply(t[r],arguments)}var i=this._toRemove;if(0<(n=i.length)){for(i.sort(en),r=0;r<n;r++){var s=i[r];e.splice(s,1),t.splice(s,1)}i.length=0}this._insideRaiseEvent=!1},Object.defineProperties(tn.prototype,{length:{get:function(){return this._length}},internalArray:{get:function(){return this._array}},maximumLength:{get:function(){return this._maximumLength},set:function(e){var t=this._length;if(e<t){for(var n=this._array,r=e;r<t;++r)n[r]=void 0;this._length=e,n.length=e}this._maximumLength=e}},comparator:{get:function(){return this._comparator}}}),tn.prototype.reserve=function(e){e=M.defaultValue(e,this._length),this._array.length=e},tn.prototype.heapify=function(e){e=M.defaultValue(e,0);for(var t=this._length,n=this._comparator,r=this._array,a=-1,i=!0;i;){var s=2*(e+1),o=s-1,a=o<t&&n(r[o],r[e])<0?o:e;(a=s<t&&n(r[s],r[a])<0?s:a)!==e?(nn(r,a,e),e=a):i=!1}},tn.prototype.resort=function(){for(var e=this._length,t=Math.ceil(e/2);0<=t;--t)this.heapify(t)},tn.prototype.insert=function(e){var t,n=this._array,r=this._comparator,a=this._maximumLength,i=this._length++;for(i<n.length?n[i]=e:n.push(e);0!==i;){var s=Math.floor((i-1)/2);if(!(r(n[i],n[s])<0))break;nn(n,i,s),i=s}return M.defined(a)&&this._length>a&&(t=n[a],this._length=a),t},tn.prototype.pop=function(e){var t,n;if(e=M.defaultValue(e,0),0!==this._length)return n=(t=this._array)[e],nn(t,e,--this._length),this.heapify(e),t[this._length]=void 0,n};var m={numberOfAttemptedRequests:0,numberOfActiveRequests:0,numberOfCancelledRequests:0,numberOfCancelledActiveRequests:0,numberOfFailedRequests:0,numberOfActiveRequestsEver:0,lastNumberOfActiveRequests:0},rn=20,C=new tn({comparator:function(e,t){return e.priority-t.priority}}),E=(C.maximumLength=rn,C.reserve(rn),[]),_={},an="undefined"!=typeof document?new o(document.location.href):new o,sn=new $t;function S(){}function on(e){M.defined(e.priorityFunction)&&(e.priority=e.priorityFunction())}function un(e){return e.state===h.UNISSUED&&(e.state=h.ISSUED,e.deferred=M.when.defer()),e.deferred.promise}function ln(e){var t,n,r=un(e);return e.state=h.ACTIVE,E.push(e),++m.numberOfActiveRequests,++m.numberOfActiveRequestsEver,++_[e.serverKey],e.requestFunction().then((n=e,function(e){var t;n.state!==h.CANCELLED&&(t=n.deferred,--m.numberOfActiveRequests,--_[n.serverKey],sn.raiseEvent(),n.state=h.RECEIVED,n.deferred=void 0,t.resolve(e))})).otherwise((t=e,function(e){t.state!==h.CANCELLED&&(++m.numberOfFailedRequests,--m.numberOfActiveRequests,--_[t.serverKey],sn.raiseEvent(e),t.state=h.FAILED,t.deferred.reject(e))})),r}function cn(e){var t,n=e.state===h.ACTIVE;e.state=h.CANCELLED,++m.numberOfCancelledRequests,M.defined(e.deferred)&&(t=e.deferred,e.deferred=void 0,t.reject()),n&&(--m.numberOfActiveRequests,--_[e.serverKey],++m.numberOfCancelledActiveRequests),M.defined(e.cancelFunction)&&e.cancelFunction()}S.maximumRequests=50,S.maximumRequestsPerServer=6,S.requestsByServer={"api.cesium.com:443":18,"assets.cesium.com:443":18},S.throttleRequests=!0,S.debugShowStatistics=!1,S.requestCompletedEvent=sn,Object.defineProperties(S,{statistics:{get:function(){return m}},priorityHeapLength:{get:function(){return rn},set:function(e){if(e<rn)for(;C.length>e;)cn(C.pop());rn=e,C.maximumLength=e,C.reserve(e)}}}),S.serverHasOpenSlots=function(e,t){t=M.defaultValue(t,1);var n=M.defaultValue(S.requestsByServer[e],S.maximumRequestsPerServer);return _[e]+t<=n},S.heapHasOpenSlots=function(e){return C.length+e<=rn},S.update=function(){for(var e,t=0,n=E.length,r=0;r<n;++r)(e=E[r]).cancelled&&cn(e),e.state!==h.ACTIVE?++t:0<t&&(E[r-t]=e);E.length-=t;var a=C.internalArray,i=C.length;for(r=0;r<i;++r)on(a[r]);C.resort();for(var s=Math.max(S.maximumRequests-E.length,0),o=0;o<s&&0<C.length;)(e=C.pop()).cancelled||e.throttleByServer&&!S.serverHasOpenSlots(e.serverKey)?cn(e):(ln(e),++o);S.debugShowStatistics&&(0===m.numberOfActiveRequests&&0<m.lastNumberOfActiveRequests&&(0<m.numberOfAttemptedRequests&&(console.log("Number of attempted requests: "+m.numberOfAttemptedRequests),m.numberOfAttemptedRequests=0),0<m.numberOfCancelledRequests&&(console.log("Number of cancelled requests: "+m.numberOfCancelledRequests),m.numberOfCancelledRequests=0),0<m.numberOfCancelledActiveRequests&&(console.log("Number of cancelled active requests: "+m.numberOfCancelledActiveRequests),m.numberOfCancelledActiveRequests=0),0<m.numberOfFailedRequests)&&(console.log("Number of failed requests: "+m.numberOfFailedRequests),m.numberOfFailedRequests=0),m.lastNumberOfActiveRequests=m.numberOfActiveRequests)},S.getServerKey=function(e){var e=new o(e).resolve(an),t=(e.normalize(),e.authority),e=(/:/.test(t)||(t=t+":"+("https"===e.scheme?"443":"80")),_[t]);return M.defined(e)||(_[t]=0),t},S.request=function(e){if(Gt(e.url)||Jt(e.url))return sn.raiseEvent(),e.state=h.RECEIVED,e.requestFunction();if(++m.numberOfAttemptedRequests,M.defined(e.serverKey)||(e.serverKey=S.getServerKey(e.url)),!S.throttleRequests||!e.throttleByServer||S.serverHasOpenSlots(e.serverKey)){if(!S.throttleRequests||!e.throttle)return ln(e);if(!(E.length>=S.maximumRequests)){on(e);var t=C.insert(e);if(M.defined(t)){if(t===e)return;cn(t)}return un(e)}}},S.clearForSpecs=function(){for(;0<C.length;)cn(C.pop());for(var e=E.length,t=0;t<e;++t)cn(E[t]);E.length=0,_={},m.numberOfAttemptedRequests=0,m.numberOfActiveRequests=0,m.numberOfCancelledRequests=0,m.numberOfCancelledActiveRequests=0,m.numberOfFailedRequests=0,m.numberOfActiveRequestsEver=0,m.lastNumberOfActiveRequests=0},S.numberOfActiveRequestsByServer=function(e){return _[e]},S.requestHeap=C;var dn={},fn={};function pn(){}function O(){}dn.add=function(e,t){e=e.toLowerCase()+":"+t;M.defined(fn[e])||(fn[e]=!0)},dn.remove=function(e,t){e=e.toLowerCase()+":"+t;M.defined(fn[e])&&delete fn[e]},dn.contains=function(e){e=function(e){(e=new o(e)).normalize();var t=e.getAuthority();if(M.defined(t)){if(-1===(t=-1!==t.indexOf("@")?t.split("@")[1]:t).indexOf(":")){e=e.getScheme();if("http"===(e=M.defined(e)?e:(e=window.location.protocol).substring(0,e.length-1)))t+=":80";else{if("https"!==e)return;t+=":443"}}return t}}(e);return!(!M.defined(e)||!M.defined(fn[e]))},dn.clear=function(){fn={}},pn.getBaseUrlAndParams=function(e){var t,n=[],e=e.split("?");if(0===e.length)throw new Error("url传入不合法");return 1===e.length?t=e[0]:(t=e[0],n=e[1].split("&").map(function(e){var t=[],n=/(\w+)=(\w+='[^']+')/;return e.match(n)?(t[0]=e.match(n)[1],t[1]=e.match(n)[2]):t=e.split("="),{key:t[0],value:t[1]}}),3<=e.length&&console.err("url有多个'?'连接符，不合法")),{baseUrl:t,params:n}},pn.spliceBaseUrlAndParams=function(t,e){return 0!==e.length&&(-1<t.indexOf("?")?e.forEach(function(e){t=t+"&"+e.key+"="+e.value}):(t=t+"?"+e[0].key+"="+e[0].value,e.splice(0,1),e.forEach(function(e){t=t+"&"+e.key+"="+e.value}))),t},pn.getBaseUrlFromQAndSlash=function(e){var t,n,r=e.indexOf("?"),a=e.indexOf("/",r),i=e.indexOf("?",a);return-1!==r&&-1!==a&&-1!==i?(t=e.substring(r+1,a),n=e.substring(a),e.substring(0,r)+n+"&"+t):-1!==r&&-1!==a&&-1===i?(t=e.substring(r+1,a),n=e.substring(a),e.substring(0,r)+n+"?"+t):e},pn.getBaseUrlFromQAndQ=function(e){return e.replace(/\?(.*?)(\?)(.*)/,"?$3&$1")},pn.correctUrl=function(e){var t,n,r,a,i,s=e.match(/\?/g);if(!s)return a=e;if(1===s.length||2===s.length){if(3!==(e=e.match(/^(.*?)(\?.*)$/)).length)throw new Error("传入url不符合标准规范,请检查");if(t=e[1],i=(e=e[2]).match(/\/([^&^?]+)/),i=-1<e.indexOf("gdbp=gdbp://")||-1<e.indexOf("gdbpUrl=")||-1<e.indexOf("gdbps=")?null:i){if(!(i=i[0]))throw new Error("传入url不符合标准规范,请检查");n=t+i,i=e.replace(i,""),r=1===s.length?i:i.replace(/\?(?!.*\?)/,"&")}else n=t,r=1===s.length?e:e.replace(/\?(?!.*\?)/,"&");a=n+r}if(2<s.length)throw new Error("传入url不符合标准规范,请检查");return a},O.ServiceConfigRequestInterceptors=function(e,t){t=M.defaultValue(t,"");var n=e.request.interceptors,r=decodeURI(t);if(n&&n instanceof Array)for(var a="",i=0;i<n.length;i++){var s,o,u=n[i].urls,l=n[i].before;if(u){if("string"==typeof u)o=decodeURI(u),-1<r.indexOf(o)&&l&&l instanceof Function&&(s=l(t))&&(a+=s);else if(u instanceof Array)for(var c=0;c<u.length;c++)o=decodeURI(u[c]),-1<r.indexOf(o)&&l&&l instanceof Function&&(s=l(t))&&(a+=s)}else l&&l instanceof Function&&(s=l(t))&&(a+=s);a&&(t=a)}return t},O.ServiceConfigResponseInterceptors=function(e,t,n){if(t=M.defaultValue(t,""),e&&e.request&&e.request.interceptors){var r=e.request.interceptors,a=decodeURI(t);if(r&&r instanceof Array)for(var i=0;i<r.length;i++){var s,o,u=r[i].urls,l=r[i].after;if(!u||u instanceof Array&&0===u.length){if(l&&l instanceof Function&&(s=l(n)))return s}else if("string"==typeof u){if(o=decodeURI(u),-1<a.indexOf(o)&&l&&l instanceof Function&&(s=l(n)))return s}else if(u instanceof Array)for(var c=0;c<u.length;c++)if(o=decodeURI(u[c]),-1<a.indexOf(o)&&l&&l instanceof Function&&(s=l(n)))return s}return n}},O.ServiceConfigToken=function(e){var t="";return t=e&&e.tokenKey&&e.tokenValue?e.tokenKey+"="+e.tokenValue:t},O.AnalysisConfigToUrl=function(e,t){return e&&e.tokenKey&&e.tokenValue&&(-1<t.indexOf("?")?t+="&"+O.ServiceConfigToken(e):t+="?"+O.ServiceConfigToken(e)),t=e&&e.request&&e.request.interceptors?O.ServiceConfigRequestInterceptors(e,t):t};function hn(e){hn.instance={tokenKey:e.tokenKey,tokenValue:e.tokenValue,headers:e.headers,request:e.request}}var mn,yn=function(){try{var e=new XMLHttpRequest;return e.open("GET","#",!0),(e.responseType="blob")===e.responseType}catch(e){return!1}}();function An(e,t,n,r){var a,i=e.query;M.defined(i)&&0!==i.length&&(a=-1===i.indexOf("=")?((a={})[i]=void 0,a):function(e){var t={};if(""!==e)for(var n=e.replace(/\+/g,"%20").split(/[&]/),r=0,a=n.length;r<a;++r){var i=n[r].indexOf("="),s=n[r].substring(0,i),s=decodeURIComponent(s),i=n[r].substring(i+1,n[r].length),i=M.defined(i)?decodeURIComponent(i):"",o=t[s];"string"==typeof o?t[s]=[o,i]:Array.isArray(o)?o.push(i):t[s]=i}return t}(i),t._queryParameters=n?wn(a,t._queryParameters,r):a,e.query=void 0)}function Cn(e,t){var t=t._queryParameters,n=Object.keys(t);1!==n.length||M.defined(t[n[0]])?e.query=function(e){var t,n="";for(t in e)if(e.hasOwnProperty(t)){var r=e[t],a=encodeURIComponent(t)+"=";if(Array.isArray(r))for(var i=0,s=r.length;i<s;++i)n+=a+encodeURIComponent(r[i])+"&";else n+=a+encodeURIComponent(r)+"&"}return n=n.slice(0,-1)}(t):e.query=n[0]}function R(e,t){return M.defined(e)?M.defined(e.clone)?e.clone():Wt(e):t}function gn(e){if(e.state===h.ISSUED||e.state===h.ACTIVE)throw new y.RuntimeError("The Resource is already being fetched.");e.state=h.UNISSUED,e.deferred=void 0}function wn(e,t,n){if(!n)return A.combine(e,t);var r,a,i,s=Wt(e,!0);for(r in t)t.hasOwnProperty(r)&&(a=s[r],i=t[r],M.defined(a)?(Array.isArray(a)||(a=s[r]=[a]),s[r]=a.concat(i)):s[r]=Array.isArray(i)?i.slice():i);return s}function b(e){"string"==typeof(e=M.defaultValue(e,M.defaultValue.EMPTY_OBJECT))&&(e={url:e}),this._url=void 0,this._templateValues=R(e.templateValues,{}),this._queryParameters=R(e.queryParameters,{}),this.headers=R(e.headers,{}),this.request=M.defaultValue(e.request,new Qt),this.proxy=e.proxy,this.retryCallback=e.retryCallback,this.retryAttempts=M.defaultValue(e.retryAttempts,0),this._retryCount=0,e.url=pn.correctUrl(e.url);e=new o(e.url);An(e,this,!0,!0),e.fragment=void 0,this._url=e.toString()}function vn(e){var n=e.resource,r=e.flipY,a=e.skipColorSpaceConversion,i=e.preferImageBitmap,s=n.request,e=(s.url=n.url,s.requestFunction=function(){var e=!1,t=(n.isDataUri||n.isBlobUri||(e=n.isCrossOriginUrl),M.when.defer());return b._Implementations.createImage(s,e,t,r,a,i),t.promise},S.request(s));if(M.defined(e))return e.otherwise(function(t){return s.state!==h.FAILED?M.when.reject(t):n.retryOnError(t).then(function(e){return e?(s.state=h.UNISSUED,s.deferred=void 0,vn({resource:n,flipY:r,skipColorSpaceConversion:a,preferImageBitmap:i})):M.when.reject(t)})})}b.createIfNeeded=function(e){return e instanceof b?e.getDerivedResource({request:e.request}):"string"!=typeof e?e:new b({url:e})},b.supportsImageBitmapOptions=function(){if(!M.defined(mn)){if("function"!=typeof createImageBitmap)return mn=M.when.resolve(!1);mn=b.fetchBlob({url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWP4////fwAJ+wP9CNHoHgAAAABJRU5ErkJggg=="}).then(function(e){return createImageBitmap(e,{imageOrientation:"flipY",premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(e){return!0}).otherwise(function(){return!1})}return mn},Object.defineProperties(b,{isBlobSupported:{get:function(){return yn}}}),Object.defineProperties(b.prototype,{queryParameters:{get:function(){return this._queryParameters}},templateValues:{get:function(){return this._templateValues}},url:{get:function(){return this.getUrlComponent(!0,!0)},set:function(e){e=new o(e=pn.correctUrl(e));An(e,this,!1),e.fragment=void 0,this._url=e.toString()}},extension:{get:function(){return(e=new o(e=this._url)).normalize(),e=-1===(t=(e=-1!==(t=(e=e.path).lastIndexOf("/"))?e.substr(t+1):e).lastIndexOf("."))?"":e.substr(t+1);var e,t}},isDataUri:{get:function(){return Gt(this._url)}},isBlobUri:{get:function(){return Jt(this._url)}},isCrossOriginUrl:{get:function(){return e=this._url,(l=M.defined(l)?l:document.createElement("a")).href=window.location.href,t=l.host,n=l.protocol,l.href=e,l.href=l.href,n!==l.protocol||t!==l.host;var e,t,n}},hasHeaders:{get:function(){return 0<Object.keys(this.headers).length}}}),b.prototype.toString=function(){return this.getUrlComponent(!0,!0)},b.prototype.getUrlComponent=function(e,t){var n,r;return this.isDataUri?this._url:(n=new o(this._url),e&&Cn(n,this),e=-1<n.path.indexOf("/igs/rest/mrcs/docs/")||-1<n.path.indexOf("/igs/rest/mrfs/docs/")||-1<n.path.indexOf("/igs/rest/mrfs/layer/query")?n.toString():n.toString().replace(/%7B/g,"{").replace(/%7D/g,"}"),r=this._templateValues,e=e.replace(/{(.*?)}/g,function(e,t){t=r[t];return M.defined(t)?encodeURIComponent(t):e}),t&&M.defined(this.proxy)?this.proxy.getURL(e):e)},b.prototype.setQueryParameters=function(e,t){this._queryParameters=t?wn(this._queryParameters,e,!1):wn(e,this._queryParameters,!1)},b.prototype.appendQueryParameters=function(e){this._queryParameters=wn(e,this._queryParameters,!0)},b.prototype.setTemplateValues=function(e,t){this._templateValues=t?A.combine(this._templateValues,e):A.combine(e,this._templateValues)},b.prototype.getDerivedResource=function(e){var t,n=this.clone();return n._retryCount=0,M.defined(e.url)&&(e.url=pn.correctUrl(e.url),An(t=new o(e.url),n,!0,M.defaultValue(e.preserveQueryParameters,!1)),t.fragment=void 0,n._url=t.resolve(new o(Yt(this._url))).toString()),M.defined(e.queryParameters)&&(n._queryParameters=A.combine(e.queryParameters,n._queryParameters)),M.defined(e.templateValues)&&(n._templateValues=A.combine(e.templateValues,n.templateValues)),M.defined(e.headers)&&(n.headers=A.combine(e.headers,n.headers)),M.defined(e.proxy)&&(n.proxy=e.proxy),M.defined(e.request)&&(n.request=e.request),M.defined(e.retryCallback)&&(n.retryCallback=e.retryCallback),M.defined(e.retryAttempts)&&(n.retryAttempts=e.retryAttempts),n},b.prototype.retryOnError=function(e){var t,n=this.retryCallback;return"function"!=typeof n||this._retryCount>=this.retryAttempts?M.when(!1):M.when(n(t=this,e)).then(function(e){return++t._retryCount,e})},b.prototype.clone=function(e){return(e=M.defined(e)?e:new b({url:this._url}))._url=this._url,e._queryParameters=Wt(this._queryParameters),e._templateValues=Wt(this._templateValues),e.headers=Wt(this.headers),e.proxy=this.proxy,e.retryCallback=this.retryCallback,e.retryAttempts=this.retryAttempts,e._retryCount=0,e.request=this.request.clone(),e},b.prototype.getBaseUri=function(e){return t=this.getUrlComponent(e),e=e,n="",-1!==(r=t.lastIndexOf("/"))&&(n=t.substring(0,r+1)),e&&(t=new o(t),M.defined(t.query)&&(n+="?"+t.query),M.defined(t.fragment))&&(n+="#"+t.fragment),n;var t,n,r},b.prototype.appendForwardSlash=function(){var e;this._url=(0!==(e=this._url).length&&"/"===e[e.length-1]||(e+="/"),e)},b.prototype.fetchArrayBuffer=function(){return this.fetch({responseType:"arraybuffer"})},b.fetchArrayBuffer=function(e){return new b(e).fetchArrayBuffer()},b.prototype.fetchBlob=function(){return this.fetch({responseType:"blob"})},b.fetchBlob=function(e){return new b(e).fetchBlob()},b.prototype.fetchImage=function(e){e=M.defaultValue(e,M.defaultValue.EMPTY_OBJECT);var t,n,r,a,i=M.defaultValue(e.preferImageBitmap,!1),s=M.defaultValue(e.preferBlob,!1),o=M.defaultValue(e.flipY,!1),u=M.defaultValue(e.skipColorSpaceConversion,!1);return gn(this.request),!yn||this.isDataUri||this.isBlobUri||!this.hasHeaders&&!s?vn({resource:this,flipY:o,skipColorSpaceConversion:u,preferImageBitmap:i}):(t=this.fetchBlob(),M.defined(t)?b.supportsImageBitmapOptions().then(function(e){return n=e&&i,t}).then(function(e){if(M.defined(e))return a=e,n?1===e.size?vn({resource:r=new b({url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAEVSURBVHhe7cExAQAAAMKg9U/tawggAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABODQE8AAH/Cno5AAAAAElFTkSuQmCC"}),flipY:o,preferImageBitmap:!1}):b.createImageBitmapFromBlob(e,{flipY:o,premultiplyAlpha:!1,skipColorSpaceConversion:u}):(e=window.URL.createObjectURL(e),vn({resource:r=new b({url:e}),flipY:o,skipColorSpaceConversion:u,preferImageBitmap:!1}))}).then(function(e){if(M.defined(e))return e.blob=a,n||window.URL.revokeObjectURL(r.url),e}).otherwise(function(e){return M.defined(r)&&window.URL.revokeObjectURL(r.url),e.blob=a,M.when.reject(e)}):void 0)},b.fetchImage=function(e){return new b(e).fetchImage({flipY:e.flipY,skipColorSpaceConversion:e.skipColorSpaceConversion,preferBlob:e.preferBlob,preferImageBitmap:e.preferImageBitmap})},b.prototype.fetchText=function(){return this.fetch({responseType:"text"})},b.fetchText=function(e){return new b(e).fetchText()},b.prototype.fetchJson=function(){var e=this.fetch({responseType:"text",headers:{Accept:"application/json,*/*;q=0.01"}});if(M.defined(e))return e.then(function(e){if(M.defined(e))return JSON.parse(e)})},b.fetchJson=function(e){return new b(e).fetchJson()},b.prototype.fetchXML=function(){return this.fetch({responseType:"document",overrideMimeType:"text/xml"})},b.fetchXML=function(e){return new b(e).fetchXML()},b.prototype.fetchJsonp=function(e){var t;for(e=M.defaultValue(e,"callback"),gn(this.request);t="loadJsonp"+Math.random().toString().substring(2,8),M.defined(window[t]););return function n(r,a,i){var e={};e[a]=i;r.setQueryParameters(e);var s=r.request;s.url=r.url;s.requestFunction=function(){var t=M.when.defer();return window[i]=function(e){t.resolve(e);try{delete window[i]}catch(e){window[i]=void 0}},b._Implementations.loadAndExecuteScript(r.url,i,t),t.promise};e=S.request(s);if(!M.defined(e))return;return e.otherwise(function(t){return s.state!==h.FAILED?M.when.reject(t):r.retryOnError(t).then(function(e){return e?(s.state=h.UNISSUED,s.deferred=void 0,n(r,a,i)):M.when.reject(t)})})}(this,e,t)},b.fetchJsonp=function(e){return new b(e).fetchJsonp(e.callbackParameterName)},b.prototype._makeRequest=function(o){var u=this,l=(gn(u.request),u.request),e=(l.url=u.url,l.requestFunction=function(){var e=o.responseType,t=A.combine(o.headers,u.headers),n=o.overrideMimeType,r=o.method,a=o.data,i=M.when.defer(),s=b._Implementations.loadWithXhr(u.url,e,r,a,t,i,n);return M.defined(s)&&M.defined(s.abort)&&(l.cancelFunction=function(){s.abort()}),i.promise},S.request(l));if(M.defined(e))return e.then(function(e){return l.cancelFunction=void 0,e}).otherwise(function(t){return l.cancelFunction=void 0,l.state!==h.FAILED?M.when.reject(t):u.retryOnError(t).then(function(e){return e?(l.state=h.UNISSUED,l.deferred=void 0,u.fetch(o)):M.when.reject(t)})})};var xn=/^data:(.*?)(;base64)?,(.*)$/;function En(e,t){t=decodeURIComponent(t);return e?atob(t):t}function _n(e,t){for(var n=En(e,t),e=new ArrayBuffer(n.length),r=new Uint8Array(e),a=0;a<n.length;a++)r[a]=n.charCodeAt(a);return e}function Sn(e,t){switch(t){case"text":return e.toString("utf8");case"json":return JSON.parse(e.toString("utf8"));default:return new Uint8Array(e).buffer}}b.prototype.fetch=function(e){return(e=R(e,{})).method="GET",this._makeRequest(e)},b.fetch=function(e){return new b(e).fetch({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},b.prototype.delete=function(e){return(e=R(e,{})).method="DELETE",this._makeRequest(e)},b.delete=function(e){return new b(e).delete({responseType:e.responseType,overrideMimeType:e.overrideMimeType,data:e.data})},b.prototype.head=function(e){return(e=R(e,{})).method="HEAD",this._makeRequest(e)},b.head=function(e){return new b(e).head({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},b.prototype.options=function(e){return(e=R(e,{})).method="OPTIONS",this._makeRequest(e)},b.options=function(e){return new b(e).options({responseType:e.responseType,overrideMimeType:e.overrideMimeType})},b.prototype.post=function(e,t){return y.Check.defined("data",e),(t=R(t,{})).method="POST",t.data=e,this._makeRequest(t)},b.post=function(e){return new b(e).post(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},b.prototype.put=function(e,t){return y.Check.defined("data",e),(t=R(t,{})).method="PUT",t.data=e,this._makeRequest(t)},b.put=function(e){return new b(e).put(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},b.prototype.patch=function(e,t){return y.Check.defined("data",e),(t=R(t,{})).method="PATCH",t.data=e,this._makeRequest(t)},b.patch=function(e){return new b(e).patch(e.data,{responseType:e.responseType,overrideMimeType:e.overrideMimeType})},(b._Implementations={}).createImage=function(s,o,u,l,c,d){var f=s.url;b.supportsImageBitmapOptions().then(function(e){var t,n,r,a,i;if(e&&d)return e=M.defaultValue(s.httpMethod,"GET"),r=s.headers,a=M.when.defer(),i=b._Implementations.loadWithXhr(f,"blob",e,s.data,r,a,void 0,void 0,void 0),M.defined(i)&&M.defined(i.abort)&&(s.cancelFunction=function(){i.abort()}),a.promise.then(function(e){if(M.defined(e))return b.createImageBitmapFromBlob(e,{flipY:l,premultiplyAlpha:!1,skipColorSpaceConversion:c});u.reject(new y.RuntimeError("Successfully retrieved "+f+" but it contained no content."))}).then(u.resolve);e=f,r=o,t=u,(n=new Image).onload=function(){t.resolve(n)},n.onerror=function(e){t.reject(e)},r&&(dn.contains(e)?n.crossOrigin="use-credentials":n.crossOrigin=""),n.src=e}).otherwise(u.reject)},b.createImageBitmapFromBlob=function(e,t){return y.Check.defined("options",t),y.Check.typeOf.bool("options.flipY",t.flipY),y.Check.typeOf.bool("options.premultiplyAlpha",t.premultiplyAlpha),y.Check.typeOf.bool("options.skipColorSpaceConversion",t.skipColorSpaceConversion),createImageBitmap(e,{imageOrientation:t.flipY?"flipY":"none",premultiplyAlpha:t.premultiplyAlpha?"premultiply":"none",colorSpaceConversion:t.skipColorSpaceConversion?"none":"default"})};var On="undefined"==typeof XMLHttpRequest;function Rn(e){var t,n;e=M.defaultValue(e,M.defaultValue.EMPTY_OBJECT),this._dates=void 0,this._samples=void 0,this._dateColumn=-1,this._xPoleWanderRadiansColumn=-1,this._yPoleWanderRadiansColumn=-1,this._ut1MinusUtcSecondsColumn=-1,this._xCelestialPoleOffsetRadiansColumn=-1,this._yCelestialPoleOffsetRadiansColumn=-1,this._taiMinusUtcSecondsColumn=-1,this._columnCount=0,this._lastIndex=-1,this._downloadPromise=void 0,this._dataError=void 0,this._addNewLeapSeconds=M.defaultValue(e.addNewLeapSeconds,!0),M.defined(e.data)?qn(this,e.data):M.defined(e.url)?(t=b.createIfNeeded(e.url),(n=this)._downloadPromise=t.fetchJson().then(function(e){qn(n,e)}).otherwise(function(){n._dataError="An error occurred while retrieving the EOP data from the URL "+t.url+"."})):qn(this,{columnNames:["dateIso8601","modifiedJulianDateUtc","xPoleWanderRadians","yPoleWanderRadians","ut1MinusUtcSeconds","lengthOfDayCorrectionSeconds","xCelestialPoleOffsetRadians","yCelestialPoleOffsetRadians","taiMinusUtcSeconds"],samples:[]})}function bn(e,t){return x.compare(e.julianDate,t)}function qn(e,t){if(M.defined(t.columnNames))if(M.defined(t.samples)){var n=t.columnNames.indexOf("modifiedJulianDateUtc"),r=t.columnNames.indexOf("xPoleWanderRadians"),a=t.columnNames.indexOf("yPoleWanderRadians"),i=t.columnNames.indexOf("ut1MinusUtcSeconds"),s=t.columnNames.indexOf("xCelestialPoleOffsetRadians"),o=t.columnNames.indexOf("yCelestialPoleOffsetRadians"),u=t.columnNames.indexOf("taiMinusUtcSeconds");if(n<0||r<0||a<0||i<0||s<0||o<0||u<0)e._dataError="Error in loaded EOP data: The columnNames property must include modifiedJulianDateUtc, xPoleWanderRadians, yPoleWanderRadians, ut1MinusUtcSeconds, xCelestialPoleOffsetRadians, yCelestialPoleOffsetRadians, and taiMinusUtcSeconds columns";else for(var l,c=e._samples=t.samples,d=e._dates=[],f=(e._dateColumn=n,e._xPoleWanderRadiansColumn=r,e._yPoleWanderRadiansColumn=a,e._ut1MinusUtcSecondsColumn=i,e._xCelestialPoleOffsetRadiansColumn=s,e._yCelestialPoleOffsetRadiansColumn=o,e._taiMinusUtcSecondsColumn=u,e._columnCount=t.columnNames.length,e._lastIndex=void 0,e._addNewLeapSeconds),p=0,h=c.length;p<h;p+=e._columnCount){var m,y,A=c[p+n],C=c[p+u],A=new x(A+w.MODIFIED_JULIAN_DATE_DIFFERENCE,C,v.TAI);d.push(A),f&&(C!==l&&M.defined(l)&&(y=yt(m=x.leapSeconds,A,bn))<0&&(A=new g(A,C),m.splice(~y,0,A)),l=C)}}else e._dataError="Error in loaded EOP data: The samples property is required.";else e._dataError="Error in loaded EOP data: The columnNames property is required."}function Mn(e,t,n,r,a){n*=r;a.xPoleWander=t[n+e._xPoleWanderRadiansColumn],a.yPoleWander=t[n+e._yPoleWanderRadiansColumn],a.xPoleOffset=t[n+e._xCelestialPoleOffsetRadiansColumn],a.yPoleOffset=t[n+e._yCelestialPoleOffsetRadiansColumn],a.ut1MinusUtc=t[n+e._ut1MinusUtcSecondsColumn]}function Tn(e,t,n){return t+e*(n-t)}function In(e,t,n,r,a,i,s){var o,u,l,c,d=e._columnCount;i>t.length-1?(s.xPoleWander=0,s.yPoleWander=0,s.xPoleOffset=0,s.yPoleOffset=0,s.ut1MinusUtc=0):(o=t[a],t=t[i],o.equals(t)||r.equals(o)?Mn(e,n,a,d,s):r.equals(t)?Mn(e,n,i,d,s):(o=x.secondsDifference(r,o)/x.secondsDifference(t,o),u=n[(a=a*d)+e._ut1MinusUtcSecondsColumn],(.5<(l=(d=n[(i=i*d)+e._ut1MinusUtcSecondsColumn])-u)||l<-.5)&&(l=n[a+e._taiMinusUtcSecondsColumn])!==(c=n[i+e._taiMinusUtcSecondsColumn])&&(t.equals(r)?u=d:d-=c-l),s.xPoleWander=Tn(o,n[a+e._xPoleWanderRadiansColumn],n[i+e._xPoleWanderRadiansColumn]),s.yPoleWander=Tn(o,n[a+e._yPoleWanderRadiansColumn],n[i+e._yPoleWanderRadiansColumn]),s.xPoleOffset=Tn(o,n[a+e._xCelestialPoleOffsetRadiansColumn],n[i+e._xCelestialPoleOffsetRadiansColumn]),s.yPoleOffset=Tn(o,n[a+e._yCelestialPoleOffsetRadiansColumn],n[i+e._yCelestialPoleOffsetRadiansColumn]),s.ut1MinusUtc=Tn(o,u,d)))}function D(e,t,n){this.heading=M.defaultValue(e,0),this.pitch=M.defaultValue(t,0),this.roll=M.defaultValue(n,0)}b._Implementations.loadWithXhr=function(a,i,s,e,t,o,n){var u=hn.instance,r=xn.exec(a),l=t||void 0;if(u&&u.headers&&(l=A.combine(l||{},u.headers)),null!==r)o.resolve(function(e,t){t=M.defaultValue(t,"");var n=e[1],r=!!e[2],a=e[3];switch(t){case"":case"text":return En(r,a);case"arraybuffer":return _n(r,a);case"blob":var i=_n(r,a);return new Blob([i],{type:n});case"document":return(new DOMParser).parseFromString(En(r,a),n);case"json":return JSON.parse(En(r,a))}}(r,i));else{if(a=O.AnalysisConfigToUrl(u,a),!On){var c,d,f,p=new XMLHttpRequest;if(dn.contains(a)&&(p.withCredentials=!0),p.open(s,a,!0),M.defined(n)&&M.defined(p.overrideMimeType)&&p.overrideMimeType(n),M.defined(l))for(var h in l)l.hasOwnProperty(h)&&p.setRequestHeader(h,l[h]);M.defined(i)&&(p.responseType=i);var m=!1;return"string"==typeof a&&(m=0===a.indexOf("file://")||"undefined"!=typeof window&&"file://"===window.location.origin),p.onload=function(){if(!(p.status<200||300<=p.status)||m&&0===p.status){var e,n,t=p.response,r=p.responseType;if("HEAD"===s||"OPTIONS"===s)e=p.getAllResponseHeaders().trim().split(/[\r\n]+/),n={},e.forEach(function(e){var e=e.split(": "),t=e.shift();n[t]=e.join(": ")}),o.resolve(n),O.ServiceConfigResponseInterceptors(u,a,t);else if(204===p.status)o.resolve();else if(!M.defined(t)||M.defined(i)&&r!==i)if("json"===i&&"string"==typeof t)try{O.ServiceConfigResponseInterceptors(u,a,t),o.resolve(JSON.parse(t))}catch(e){o.reject(e)}else(""===r||"document"===r)&&M.defined(p.responseXML)&&p.responseXML.hasChildNodes()?(O.ServiceConfigResponseInterceptors(u,a,t),o.resolve(p.responseXML)):""!==r&&"text"!==r||!M.defined(p.responseText)?o.reject(new y.RuntimeError("Invalid XMLHttpRequest response type.")):(O.ServiceConfigResponseInterceptors(u,a,t),o.resolve(p.responseText));else o.resolve(t),O.ServiceConfigResponseInterceptors(u,a,t)}else o.reject(new Kt(p.status,p.response,p.getAllResponseHeaders()))},p.onerror=function(e){o.reject(new Kt)},p.send(e),p}t=a,c=i,r=s,n=l,d=o,e="https:"===(t=require("url").parse(t)).protocol?require("https"):require("http"),f=require("zlib"),t={protocol:t.protocol,hostname:t.hostname,port:t.port,path:t.path,query:t.query,method:r,headers:n},e.request(t).on("response",function(t){var n;t.statusCode<200||300<=t.statusCode?d.reject(new Kt(t.statusCode,t,t.headers)):(n=[],t.on("data",function(e){n.push(e)}),t.on("end",function(){var e=Buffer.concat(n);"gzip"===t.headers["content-encoding"]?f.gunzip(e,function(e,t){e?d.reject(new y.RuntimeError("Error decompressing response.")):d.resolve(Sn(t,c))}):d.resolve(Sn(e,c))}))}).on("error",function(e){d.reject(new Kt)}).end()}},b._Implementations.loadAndExecuteScript=function(e,t,n){return e=e,r=M.when.defer(),(a=document.createElement("script")).async=!0,a.src=e,i=document.getElementsByTagName("head")[0],a.onload=function(){a.onload=void 0,i.removeChild(a),r.resolve()},a.onerror=function(e){r.reject(e)},i.appendChild(a),r.promise.otherwise(n.reject);var r,a,i},(b._DefaultImplementations={}).createImage=b._Implementations.createImage,b._DefaultImplementations.loadWithXhr=b._Implementations.loadWithXhr,b._DefaultImplementations.loadAndExecuteScript=b._Implementations.loadAndExecuteScript,b.DEFAULT=Object.freeze(new b({url:"undefined"==typeof document?"":document.location.href.split("?")[0]})),Rn.NONE=Object.freeze({getPromiseToLoad:function(){return M.when.resolve()},compute:function(e,t){return M.defined(t)?(t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0):t=new At(0,0,0,0,0),t}}),Rn.prototype.getPromiseToLoad=function(){return M.when(this._downloadPromise)},Rn.prototype.compute=function(e,t){if(M.defined(this._samples)){if(M.defined(t)||(t=new At(0,0,0,0,0)),0===this._samples.length)t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0;else{var n=this._dates,r=this._lastIndex,a=0,i=0;if(M.defined(r)){var s=n[r],o=n[r+1],s=x.lessThanOrEquals(s,e),u=!M.defined(o),l=u||x.greaterThanOrEquals(o,e);if(s&&l)return a=r,!u&&o.equals(e)&&++a,In(this,n,this._samples,e,a,i=a+1,t),t}s=yt(n,e,x.compare,this._dateColumn);0<=s?(s<n.length-1&&n[s+1].equals(e)&&++s,i=a=s):(a=(i=~s)-1)<0&&(a=0),this._lastIndex=a,In(this,n,this._samples,e,a,i,t)}return t}if(M.defined(this._dataError))throw new y.RuntimeError(this._dataError)},D.fromQuaternion=function(e,t){M.defined(t)||(t=new D);var n=2*(e.w*e.y-e.z*e.x),r=1-2*(e.x*e.x+e.y*e.y),a=2*(e.w*e.x+e.y*e.z),i=1-2*(e.y*e.y+e.z*e.z),e=2*(e.w*e.z+e.x*e.y);return t.heading=-Math.atan2(e,i),t.roll=Math.atan2(a,r),t.pitch=-c.CesiumMath.asinClamped(n),t},D.fromDegrees=function(e,t,n,r){return(r=M.defined(r)?r:new D).heading=e*c.CesiumMath.RADIANS_PER_DEGREE,r.pitch=t*c.CesiumMath.RADIANS_PER_DEGREE,r.roll=n*c.CesiumMath.RADIANS_PER_DEGREE,r},D.clone=function(e,t){if(M.defined(e))return M.defined(t)?(t.heading=e.heading,t.pitch=e.pitch,t.roll=e.roll,t):new D(e.heading,e.pitch,e.roll)},D.equals=function(e,t){return e===t||M.defined(e)&&M.defined(t)&&e.heading===t.heading&&e.pitch===t.pitch&&e.roll===t.roll},D.equalsEpsilon=function(e,t,n,r){return e===t||M.defined(e)&&M.defined(t)&&c.CesiumMath.equalsEpsilon(e.heading,t.heading,n,r)&&c.CesiumMath.equalsEpsilon(e.pitch,t.pitch,n,r)&&c.CesiumMath.equalsEpsilon(e.roll,t.roll,n,r)},D.prototype.clone=function(e){return D.clone(this,e)},D.prototype.equals=function(e){return D.equals(this,e)},D.prototype.equalsEpsilon=function(e,t,n){return D.equalsEpsilon(this,e,t,n)},D.prototype.toString=function(){return"("+this.heading+", "+this.pitch+", "+this.roll+")"};var Dn,Pn,Un,Nn=/((?:.*\/)|^)Cesium\.js(?:\?|\#|$)/;function Fn(e){return"undefined"==typeof document?e:((Dn=M.defined(Dn)?Dn:document.createElement("a")).href=e,Dn.href=Dn.href,Dn.href)}function zn(){var e;return M.defined(Pn)||(e="undefined"!=typeof CESIUM_BASE_URL?CESIUM_BASE_URL:"object"==typeof define&&M.defined(define.amd)&&!define.amd.toUrlUndefined&&M.defined(require.toUrl)?Yt("..",kn("Core/buildModuleUrl.js")):function(){for(var e=document.getElementsByTagName("script"),t=0,n=e.length;t<n;++t){var r=e[t].getAttribute("src"),r=Nn.exec(r);if(null!==r)return r[1]}}(),(Pn=new b({url:Fn(e)})).appendForwardSlash()),Pn}function Bn(e){return Fn(require.toUrl("../"+e))}function Vn(e){return zn().getDerivedResource({url:e}).url}function kn(e){return(Un=M.defined(Un)?Un:"object"==typeof define&&M.defined(define.amd)&&!define.amd.toUrlUndefined&&M.defined(require.toUrl)?Bn:Vn)(e)}function Ln(e,t,n){this.x=e,this.y=t,this.s=n}function jn(e){e=M.defaultValue(e,M.defaultValue.EMPTY_OBJECT),this._xysFileUrlTemplate=b.createIfNeeded(e.xysFileUrlTemplate),this._interpolationOrder=M.defaultValue(e.interpolationOrder,9),this._sampleZeroJulianEphemerisDate=M.defaultValue(e.sampleZeroJulianEphemerisDate,2442396.5),this._sampleZeroDateTT=new x(this._sampleZeroJulianEphemerisDate,0,v.TAI),this._stepSizeDays=M.defaultValue(e.stepSizeDays,1),this._samplesPerXysFile=M.defaultValue(e.samplesPerXysFile,1e3),this._totalSamples=M.defaultValue(e.totalSamples,27426),this._samples=new Array(3*this._totalSamples),this._chunkDownloadsInProgress=[];for(var t=this._interpolationOrder,n=this._denominators=new Array(t+1),r=this._xTable=new Array(t+1),a=Math.pow(this._stepSizeDays,t),i=0;i<=t;++i){n[i]=a,r[i]=i*this._stepSizeDays;for(var s=0;s<=t;++s)s!==i&&(n[i]*=i-s);n[i]=1/n[i]}this._work=new Array(t+1),this._coef=new Array(t+1)}kn._cesiumScriptRegex=Nn,kn._buildModuleUrlFromBaseUrl=Vn,kn._clearBaseResource=function(){Pn=void 0},kn.setBaseUrl=function(e){Pn=b.DEFAULT.getDerivedResource({url:e})},kn.getCesiumBaseUrl=zn;var Wn=new x(0,0,v.TAI);function Yn(e,t,n){var r=Wn;return r.dayNumber=t,r.secondsOfDay=n,x.daysDifference(r,e._sampleZeroDateTT)}function Hn(s,o){var u,e;return s._chunkDownloadsInProgress[o]||(u=M.when.defer(),s._chunkDownloadsInProgress[o]=u,e=s._xysFileUrlTemplate,e=M.defined(e)?e.getDerivedResource({templateValues:{0:o}}):new b({url:kn("Assets/IAU2006_XYS/IAU2006_XYS_"+o+".json")}),M.when(e.fetchJson(),function(e){s._chunkDownloadsInProgress[o]=!1;for(var t=s._samples,n=e.samples,r=o*s._samplesPerXysFile*3,a=0,i=n.length;a<i;++a)t[r+a]=n[a];u.resolve()}),u.promise)}jn.prototype.preload=function(e,t,n,r){for(var e=Yn(this,e,t),t=Yn(this,n,r),n=e/this._stepSizeDays-this._interpolationOrder/2|0,r=t/this._stepSizeDays-this._interpolationOrder/2|0+this._interpolationOrder,e=(r>=this._totalSamples&&(r=this._totalSamples-1),(n=n<0?0:n)/this._samplesPerXysFile|0),a=r/this._samplesPerXysFile|0,i=[],s=e;s<=a;++s)i.push(Hn(this,s));return M.when.all(i)},jn.prototype.computeXysRadians=function(e,t,n){e=Yn(this,e,t);if(!(e<0)){t=e/this._stepSizeDays|0;if(!(t>=this._totalSamples)){var r=this._interpolationOrder,a=t-(r/2|0),t=(a=a<0?0:a)+r,i=(t>=this._totalSamples&&(a=(t=this._totalSamples-1)-r)<0&&(a=0),!1),s=this._samples;if(M.defined(s[3*a])||(Hn(this,a/this._samplesPerXysFile|0),i=!0),M.defined(s[3*t])||(Hn(this,t/this._samplesPerXysFile|0),i=!0),!i){M.defined(n)?(n.x=0,n.y=0,n.s=0):n=new Ln(0,0,0);for(var o,u=e-a*this._stepSizeDays,l=this._work,c=this._denominators,d=this._coef,f=this._xTable,p=0;p<=r;++p)l[p]=u-f[p];for(p=0;p<=r;++p){for(d[p]=1,o=0;o<=r;++o)o!==p&&(d[p]*=l[o]);d[p]*=c[p];var h=3*(a+p);n.x+=d[p]*s[h++],n.y+=d[p]*s[h++],n.s+=d[p]*s[h]}return n}}}};var P={},Jn={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},Xn={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},Gn={},U={east:new q.Cartesian3,north:new q.Cartesian3,up:new q.Cartesian3,west:new q.Cartesian3,south:new q.Cartesian3,down:new q.Cartesian3},Zn=new q.Cartesian3,Qn=new q.Cartesian3,Kn=new q.Cartesian3,$n=(P.localFrameToFixedFrameGenerator=function(a,i){var s,e,t;if(Jn.hasOwnProperty(a)&&Jn[a].hasOwnProperty(i))return s=Jn[a][i],M.defined(Gn[t=a+i])?e=Gn[t]:Gn[t]=e=function(e,t,n){var r;return M.defined(n)||(n=new q.Matrix4),q.Cartesian3.equalsEpsilon(e,q.Cartesian3.ZERO,c.CesiumMath.EPSILON14)?(q.Cartesian3.unpack(Xn[a],0,Zn),q.Cartesian3.unpack(Xn[i],0,Qn),q.Cartesian3.unpack(Xn[s],0,Kn)):c.CesiumMath.equalsEpsilon(e.x,0,c.CesiumMath.EPSILON14)&&c.CesiumMath.equalsEpsilon(e.y,0,c.CesiumMath.EPSILON14)?(r=c.CesiumMath.sign(e.z),q.Cartesian3.unpack(Xn[a],0,Zn),"east"!==a&&"west"!==a&&q.Cartesian3.multiplyByScalar(Zn,r,Zn),q.Cartesian3.unpack(Xn[i],0,Qn),"east"!==i&&"west"!==i&&q.Cartesian3.multiplyByScalar(Qn,r,Qn),q.Cartesian3.unpack(Xn[s],0,Kn),"east"!==s&&"west"!==s&&q.Cartesian3.multiplyByScalar(Kn,r,Kn)):((t=M.defaultValue(t,q.Ellipsoid.WGS84)).geodeticSurfaceNormal(e,U.up),r=U.up,(t=U.east).x=-e.y,t.y=e.x,t.z=0,q.Cartesian3.normalize(t,U.east),q.Cartesian3.cross(r,t,U.north),q.Cartesian3.multiplyByScalar(U.up,-1,U.down),q.Cartesian3.multiplyByScalar(U.east,-1,U.west),q.Cartesian3.multiplyByScalar(U.north,-1,U.south),Zn=U[a],Qn=U[i],Kn=U[s]),n[0]=Zn.x,n[1]=Zn.y,n[2]=Zn.z,n[3]=0,n[4]=Qn.x,n[5]=Qn.y,n[6]=Qn.z,n[7]=0,n[8]=Kn.x,n[9]=Kn.y,n[10]=Kn.z,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,n},e;throw new y.DeveloperError("firstAxis and secondAxis must be east, north, up, west, south or down.")},P.eastNorthUpToFixedFrame=P.localFrameToFixedFrameGenerator("east","north"),P.northEastDownToFixedFrame=P.localFrameToFixedFrameGenerator("north","east"),P.northUpEastToFixedFrame=P.localFrameToFixedFrameGenerator("north","up"),P.northWestUpToFixedFrame=P.localFrameToFixedFrameGenerator("north","west"),new d),er=new q.Cartesian3(1,1,1),tr=new q.Matrix4,nr=(P.headingPitchRollToFixedFrame=function(e,t,n,r,a){r=M.defaultValue(r,P.eastNorthUpToFixedFrame);t=d.fromHeadingPitchRoll(t,$n),t=q.Matrix4.fromTranslationQuaternionRotationScale(q.Cartesian3.ZERO,t,er,tr);return a=r(e,n,a),q.Matrix4.multiply(a,t,a)},new q.Matrix4),rr=new q.Matrix3,ar=(P.headingPitchRollQuaternion=function(e,t,n,r,a){e=P.headingPitchRollToFixedFrame(e,t,n,r,nr),t=q.Matrix4.getMatrix3(e,rr);return d.fromRotationMatrix(t,a)},new q.Cartesian3(1,1,1)),ir=new q.Cartesian3,sr=new q.Matrix4,or=new q.Matrix4,ur=new q.Matrix3,lr=new d,cr=(P.fixedFrameToHeadingPitchRoll=function(e,t,n,r){t=M.defaultValue(t,q.Ellipsoid.WGS84),n=M.defaultValue(n,P.eastNorthUpToFixedFrame),M.defined(r)||(r=new D);var a=q.Matrix4.getTranslation(e,ir);return q.Cartesian3.equals(a,q.Cartesian3.ZERO)?(r.heading=0,r.pitch=0,r.roll=0,r):(n=q.Matrix4.inverseTransformation(n(a,t,sr),sr),a=q.Matrix4.setScale(e,ar,or),a=q.Matrix4.setTranslation(a,q.Cartesian3.ZERO,a),n=q.Matrix4.multiply(n,a,n),t=d.fromRotationMatrix(q.Matrix4.getMatrix3(n,ur),lr),t=d.normalize(t,t),D.fromQuaternion(t,r))},c.CesiumMath.TWO_PI/86400),dr=new x,fr=(P.computeTemeToPseudoFixedMatrix=function(e,t){var e=(dr=x.addSeconds(e,-x.computeTaiMinusUtc(e),dr)).dayNumber,n=dr.secondsOfDay,r=e-2451545,r=43200<=n?(.5+r)/w.DAYS_PER_JULIAN_CENTURY:(r-.5)/w.DAYS_PER_JULIAN_CENTURY,r=(24110.54841+r*(8640184.812866+r*(.093104+-62e-7*r)))*cr%c.CesiumMath.TWO_PI+(72921158553e-15+11772758384668e-32*(e-2451545.5))*((n+.5*w.SECONDS_PER_DAY)%w.SECONDS_PER_DAY),e=Math.cos(r),n=Math.sin(r);return M.defined(t)?(t[0]=e,t[1]=-n,t[2]=0,t[3]=n,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new q.Matrix3(e,n,0,-n,e,0,0,0,1)},P.iau2006XysData=new jn,P.earthOrientationParameters=Rn.NONE,32.184),pr=(P.preloadIcrfFixed=function(e){var t=e.start.dayNumber,n=e.start.secondsOfDay+fr,r=e.stop.dayNumber,e=e.stop.secondsOfDay+fr,t=P.iau2006XysData.preload(t,n,r,e),n=P.earthOrientationParameters.getPromiseToLoad();return M.when.all([t,n])},P.computeIcrfToFixedMatrix=function(e,t){M.defined(t)||(t=new q.Matrix3);e=P.computeFixedToIcrfMatrix(e,t);if(M.defined(e))return q.Matrix3.transpose(e,t)},new Ln(0,0,0)),hr=new At(0,0,0,0,0),mr=new q.Matrix3,yr=new q.Matrix3,Ar=(P.computeFixedToIcrfMatrix=function(e,t){M.defined(t)||(t=new q.Matrix3);var n=P.earthOrientationParameters.compute(e,hr);if(M.defined(n)){var r,a,i,s,o=e.dayNumber,u=e.secondsOfDay+fr,l=P.iau2006XysData.computeXysRadians(o,u,pr);if(M.defined(l))return i=l.x+n.xPoleOffset,r=l.y+n.yPoleOffset,s=1/(1+Math.sqrt(1-i*i-r*r)),(a=mr)[0]=1-s*i*i,a[3]=-s*i*r,a[6]=i,a[1]=-s*i*r,a[4]=1-s*r*r,a[7]=r,a[2]=-i,a[5]=-r,a[8]=1-s*(i*i+r*r),s=q.Matrix3.fromRotationZ(-l.s,yr),i=q.Matrix3.multiply(a,s,mr),r=e.dayNumber,a=(a=.779057273264+(l=(e.secondsOfDay-x.computeTaiMinusUtc(e)+n.ut1MinusUtc)/w.SECONDS_PER_DAY)+.00273781191135448*(r-2451545+l))%1*c.CesiumMath.TWO_PI,s=q.Matrix3.fromRotationZ(a,yr),e=q.Matrix3.multiply(i,s,mr),r=Math.cos(n.xPoleWander),l=Math.cos(n.yPoleWander),a=Math.sin(n.xPoleWander),i=Math.sin(n.yPoleWander),s=o-2451545+u/w.SECONDS_PER_DAY,n=-47e-6*(s/=36525)*c.CesiumMath.RADIANS_PER_DEGREE/3600,o=Math.cos(n),u=Math.sin(n),(s=yr)[0]=r*o,s[1]=r*u,s[2]=a,s[3]=-l*u+i*a*o,s[4]=l*o+i*a*u,s[5]=-i*r,s[6]=-i*u-l*a*o,s[7]=i*o-l*a*u,s[8]=l*r,q.Matrix3.multiply(e,s,t)}},new q.Cartesian4),Cr=(P.pointToWindowCoordinates=function(e,t,n,r){return(r=P.pointToGLWindowCoordinates(e,t,n,r)).y=2*t[5]-r.y,r},P.pointToGLWindowCoordinates=function(e,t,n,r){M.defined(r)||(r=new q.Cartesian2);var a=Ar;return q.Matrix4.multiplyByVector(e,q.Cartesian4.fromElements(n.x,n.y,n.z,1,a),a),q.Cartesian4.multiplyByScalar(a,1/a.w,a),q.Matrix4.multiplyByVector(t,a,a),q.Cartesian2.fromCartesian4(a,r)},new q.Cartesian3),gr=new q.Cartesian3,wr=new q.Cartesian3,vr=(P.rotationMatrixFromPositionVelocity=function(e,t,n,r){n=M.defaultValue(n,q.Ellipsoid.WGS84).geodeticSurfaceNormal(e,Cr),e=q.Cartesian3.cross(t,n,gr),q.Cartesian3.equalsEpsilon(e,q.Cartesian3.ZERO,c.CesiumMath.EPSILON6)&&(e=q.Cartesian3.clone(q.Cartesian3.UNIT_X,e)),n=q.Cartesian3.cross(e,t,wr);return q.Cartesian3.normalize(n,n),q.Cartesian3.cross(t,n,e),q.Cartesian3.negate(e,e),q.Cartesian3.normalize(e,e),(r=M.defined(r)?r:new q.Matrix3)[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=e.y,r[5]=e.z,r[6]=n.x,r[7]=n.y,r[8]=n.z,r},new q.Matrix4(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1)),xr=new q.Cartographic,Er=new q.Cartesian3,_r=new q.Cartesian3,Sr=new q.Matrix3,Or=new q.Matrix4,Rr=new q.Matrix4;P.basisTo2D=function(e,t,n){var r=q.Matrix4.getTranslation(t,_r),a=e.ellipsoid,i=a.cartesianToCartographic(r,xr),e=e.project(i,Er),i=(q.Cartesian3.fromElements(e.z,e.x,e.y,e),P.eastNorthUpToFixedFrame(r,a,Or)),r=q.Matrix4.inverseTransformation(i,Rr),a=q.Matrix4.getMatrix3(t,Sr),i=q.Matrix4.multiplyByMatrix3(r,a,n);return q.Matrix4.multiply(vr,i,n),q.Matrix4.setTranslation(n,e,n),n},P.wgs84To2DModelMatrix=function(e,t,n){var r=e.ellipsoid,a=P.eastNorthUpToFixedFrame(t,r,Or),a=q.Matrix4.inverseTransformation(a,Rr),r=r.cartesianToCartographic(t,xr),t=e.project(r,Er),e=(q.Cartesian3.fromElements(t.z,t.x,t.y,t),q.Matrix4.fromTranslation(t,Or));return q.Matrix4.multiply(vr,a,n),q.Matrix4.multiply(e,n,n),n},e.BoundingSphere=T,e.FeatureDetection=i,e.GeographicProjection=N,e.Intersect=F,e.Interval=z,e.Quaternion=d,e.Resource=b,e.Transforms=P,e.buildModuleUrl=kn});
