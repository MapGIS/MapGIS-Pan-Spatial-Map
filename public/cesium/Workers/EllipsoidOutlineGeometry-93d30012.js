define(["exports","./GeometryOffsetAttribute-8c0bd3ce","./Transforms-3bc98d07","./Matrix2-59fd2efe","./ComponentDatatype-b7b5db18","./when-ae2e0b60","./RuntimeError-24b14c10","./GeometryAttribute-dff85b2b","./GeometryAttributes-5ce4955a","./IndexDatatype-6902a37d"],function(i,D,I,T,z,L,t,R,N,B){"use strict";var f=new T.Cartesian3(1,1,1),S=Math.cos,U=Math.sin;function l(i){i=L.defaultValue(i,L.defaultValue.EMPTY_OBJECT);var t=L.defaultValue(i.radii,f),e=L.defaultValue(i.innerRadii,t),a=L.defaultValue(i.minimumClock,0),n=L.defaultValue(i.maximumClock,z.CesiumMath.TWO_PI),r=L.defaultValue(i.minimumCone,0),o=L.defaultValue(i.maximumCone,z.CesiumMath.PI),s=Math.round(L.defaultValue(i.stackPartitions,10)),m=Math.round(L.defaultValue(i.slicePartitions,8)),u=Math.round(L.defaultValue(i.subdivisions,128));this._radii=T.Cartesian3.clone(t),this._innerRadii=T.Cartesian3.clone(e),this._minimumClock=a,this._maximumClock=n,this._minimumCone=r,this._maximumCone=o,this._stackPartitions=s,this._slicePartitions=m,this._subdivisions=u,this._offsetAttribute=i.offsetAttribute,this._workerName="createEllipsoidOutlineGeometry"}l.packedLength=2*T.Cartesian3.packedLength+8,l.pack=function(i,t,e){return e=L.defaultValue(e,0),T.Cartesian3.pack(i._radii,t,e),e+=T.Cartesian3.packedLength,T.Cartesian3.pack(i._innerRadii,t,e),e+=T.Cartesian3.packedLength,t[e++]=i._minimumClock,t[e++]=i._maximumClock,t[e++]=i._minimumCone,t[e++]=i._maximumCone,t[e++]=i._stackPartitions,t[e++]=i._slicePartitions,t[e++]=i._subdivisions,t[e]=L.defaultValue(i._offsetAttribute,-1),t};var c=new T.Cartesian3,C=new T.Cartesian3,_={radii:c,innerRadii:C,minimumClock:void 0,maximumClock:void 0,minimumCone:void 0,maximumCone:void 0,stackPartitions:void 0,slicePartitions:void 0,subdivisions:void 0,offsetAttribute:void 0};l.unpack=function(i,t,e){t=L.defaultValue(t,0);var a=T.Cartesian3.unpack(i,t,c),n=(t+=T.Cartesian3.packedLength,T.Cartesian3.unpack(i,t,C)),r=(t+=T.Cartesian3.packedLength,i[t++]),o=i[t++],s=i[t++],m=i[t++],u=i[t++],f=i[t++],d=i[t++],i=i[t];return L.defined(e)?(e._radii=T.Cartesian3.clone(a,e._radii),e._innerRadii=T.Cartesian3.clone(n,e._innerRadii),e._minimumClock=r,e._maximumClock=o,e._minimumCone=s,e._maximumCone=m,e._stackPartitions=u,e._slicePartitions=f,e._subdivisions=d,e._offsetAttribute=-1===i?void 0:i,e):(_.minimumClock=r,_.maximumClock=o,_.minimumCone=s,_.maximumCone=m,_.stackPartitions=u,_.slicePartitions=f,_.subdivisions=d,_.offsetAttribute=-1===i?void 0:i,new l(_))},l.createGeometry=function(i){var t=i._radii;if(!(t.x<=0||t.y<=0||t.z<=0)){var e=i._innerRadii;if(!(e.x<=0||e.y<=0||e.z<=0)){for(var a,n,r=i._minimumClock,o=i._maximumClock,s=i._minimumCone,m=i._maximumCone,u=i._subdivisions,f=T.Ellipsoid.fromCartesian3(t),d=i._slicePartitions+1,l=i._stackPartitions+1,c=((d=Math.round(d*Math.abs(o-r)/z.CesiumMath.TWO_PI))<2&&(d=2),(l=Math.round(l*Math.abs(m-s)/z.CesiumMath.PI))<2&&(l=2),0),C=1,_=e.x!==t.x||e.y!==t.y||e.z!==t.z,p=!1,b=!1,h=(_&&(C=2,0<s&&(p=!0,c+=d),m<Math.PI)&&(b=!0,c+=d),u*C*(l+d)),y=new Float64Array(3*h),k=B.IndexDatatype.createTypedArray(h,2*(h+c-(d+l)*C)),v=0,x=new Array(l),A=new Array(l),P=0;P<l;P++)x[P]=U(n=s+P*(m-s)/(l-1)),A[P]=S(n);var w=new Array(u),M=new Array(u);for(P=0;P<u;P++)w[P]=U(a=r+P*(o-r)/(u-1)),M[P]=S(a);for(P=0;P<l;P++)for(g=0;g<u;g++)y[v++]=t.x*x[P]*M[g],y[v++]=t.y*x[P]*w[g],y[v++]=t.z*A[P];if(_)for(P=0;P<l;P++)for(g=0;g<u;g++)y[v++]=e.x*x[P]*M[g],y[v++]=e.y*x[P]*w[g],y[v++]=e.z*A[P];for(x.length=u,A.length=u,P=0;P<u;P++)x[P]=U(n=s+P*(m-s)/(u-1)),A[P]=S(n);for(w.length=d,M.length=d,P=0;P<d;P++)w[P]=U(a=r+P*(o-r)/(d-1)),M[P]=S(a);for(P=0;P<u;P++)for(g=0;g<d;g++)y[v++]=t.x*x[P]*M[g],y[v++]=t.y*x[P]*w[g],y[v++]=t.z*A[P];if(_)for(P=0;P<u;P++)for(g=0;g<d;g++)y[v++]=e.x*x[P]*M[g],y[v++]=e.y*x[P]*w[g],y[v++]=e.z*A[P];for(P=v=0;P<l*C;P++)for(var V=P*u,g=0;g<u-1;g++)k[v++]=V+g,k[v++]=V+g+1;var E=l*u*C;for(P=0;P<d;P++)for(g=0;g<u-1;g++)k[v++]=E+P+g*d,k[v++]=E+P+(g+1)*d;if(_)for(E=l*u*C+d*u,P=0;P<d;P++)for(g=0;g<u-1;g++)k[v++]=E+P+g*d,k[v++]=E+P+(g+1)*d;if(_){var G=l*u*C,O=G+u*d;if(p)for(P=0;P<d;P++)k[v++]=G+P,k[v++]=O+P;if(b)for(G+=u*d-d,O+=u*d-d,P=0;P<d;P++)k[v++]=G+P,k[v++]=O+P}h=new N.GeometryAttributes({position:new R.GeometryAttribute({componentDatatype:z.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:y})});return L.defined(i._offsetAttribute)&&(c=y.length,_=new Uint8Array(c/3),p=i._offsetAttribute===D.GeometryOffsetAttribute.NONE?0:1,D.arrayFill(_,p),h.applyOffset=new R.GeometryAttribute({componentDatatype:z.ComponentDatatype.UNSIGNED_BYTE,componentsPerAttribute:1,values:_})),new R.Geometry({attributes:h,indices:k,primitiveType:R.PrimitiveType.LINES,boundingSphere:I.BoundingSphere.fromEllipsoid(f),offsetAttribute:i._offsetAttribute})}}},i.EllipsoidOutlineGeometry=l});
