define(["exports","./Matrix2-10a61a55","./ComponentDatatype-b7b5db18","./RuntimeError-24b14c10","./when-ae2e0b60"],function(t,o,C,e,u){"use strict";var a={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4",getMathType:function(t){switch(t){case a.SCALAR:return Number;case a.VEC2:return o.Cartesian2;case a.VEC3:return o.Cartesian3;case a.VEC4:return o.Cartesian4;case a.MAT2:return o.Matrix2;case a.MAT3:return o.Matrix3;case a.MAT4:return o.Matrix4}},getNumberOfComponents:function(t){switch(t){case a.SCALAR:return 1;case a.VEC2:return 2;case a.VEC3:return 3;case a.VEC4:case a.MAT2:return 4;case a.MAT3:return 9;case a.MAT4:return 16}}},M=Object.freeze(a),s={octEncodeInRange:function(t,e,a){var n;return a.x=t.x/(Math.abs(t.x)+Math.abs(t.y)+Math.abs(t.z)),a.y=t.y/(Math.abs(t.x)+Math.abs(t.y)+Math.abs(t.z)),t.z<0&&(t=a.x,n=a.y,a.x=(1-Math.abs(n))*C.CesiumMath.signNotZero(t),a.y=(1-Math.abs(t))*C.CesiumMath.signNotZero(n)),a.x=C.CesiumMath.toSNorm(a.x,e),a.y=C.CesiumMath.toSNorm(a.y,e),a},octEncode:function(t,e){return s.octEncodeInRange(t,255,e)}},n=new o.Cartesian2,r=new Uint8Array(1);function c(t){return r[0]=t,r[0]}s.octEncodeToCartesian4=function(t,e){return s.octEncodeInRange(t,65535,n),e.x=c(n.x*(1/256)),e.y=c(n.x),e.z=c(n.y*(1/256)),e.w=c(n.y),e},s.octDecodeInRange=function(t,e,a,n){return n.x=C.CesiumMath.fromSNorm(t,a),n.y=C.CesiumMath.fromSNorm(e,a),n.z=1-(Math.abs(n.x)+Math.abs(n.y)),n.z<0&&(t=n.x,n.x=(1-Math.abs(n.y))*C.CesiumMath.signNotZero(t),n.y=(1-Math.abs(t))*C.CesiumMath.signNotZero(n.y)),o.Cartesian3.normalize(n,n)},s.octDecode=function(t,e,a){return s.octDecodeInRange(t,e,255,a)},s.octDecodeFromCartesian4=function(t,e){var a=t.x,n=t.y,o=t.z,t=t.w;return s.octDecodeInRange(256*a+n,256*o+t,65535,e)},s.octPackFloat=function(t){return 256*t.x+t.y};var i=new o.Cartesian2;function f(t){return t>>1^-(1&t)}s.octEncodeFloat=function(t){return s.octEncode(t,i),s.octPackFloat(i)},s.octDecodeFloat=function(t,e){var t=t/256,a=Math.floor(t);return s.octDecode(a,256*(t-a),e)},s.octPack=function(t,e,a,n){t=s.octEncodeFloat(t),e=s.octEncodeFloat(e),a=s.octEncode(a,i);return n.x=65536*a.x+t,n.y=65536*a.y+e,n},s.octUnpack=function(t,e,a,n){var o=t.x/65536,r=Math.floor(o),c=65536*(o-r),o=t.y/65536,t=Math.floor(o),o=65536*(o-t);s.octDecodeFloat(c,e),s.octDecodeFloat(o,a),s.octDecode(r,t,n)},s.compressTextureCoordinates=function(t){return 4096*(4095*t.x|0)+(4095*t.y|0)},s.decompressTextureCoordinates=function(t,e){var a=Math.floor(t/4096);return e.x=a/4095,e.y=(t-4096*a)/4095,e},s.zigZagDeltaDecode=function(t,e,a){for(var n=t.length,o=0,r=0,c=0,s=0;s<n;++s)o+=f(t[s]),r+=f(e[s]),t[s]=o,e[s]=r,u.defined(a)&&(c+=f(a[s]),a[s]=c)},s.dequantize=function(t,e,a,n){var o,r=M.getNumberOfComponents(a);switch(e){case C.ComponentDatatype.BYTE:o=127;break;case C.ComponentDatatype.UNSIGNED_BYTE:o=255;break;case C.ComponentDatatype.SHORT:o=32767;break;case C.ComponentDatatype.UNSIGNED_SHORT:o=65535;break;case C.ComponentDatatype.INT:o=2147483647;break;case C.ComponentDatatype.UNSIGNED_INT:o=4294967295}for(var c=new Float32Array(n*r),s=0;s<n;s++)for(var u=0;u<r;u++){var i=s*r+u;c[i]=Math.max(t[i]/o,-1)}return c},t.AttributeCompression=s});
