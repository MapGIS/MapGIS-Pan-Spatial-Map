define(["exports","./Matrix2-10a61a55","./RuntimeError-24b14c10","./when-ae2e0b60","./WebGLConstants-35626ea2","./Transforms-70ded1e8"],function(t,d,e,n,a,x){"use strict";var r=Object.freeze({NONE:0,TRIANGLES:1,LINES:2,POLYLINES:3}),i={POINTS:a.WebGLConstants.POINTS,LINES:a.WebGLConstants.LINES,LINE_LOOP:a.WebGLConstants.LINE_LOOP,LINE_STRIP:a.WebGLConstants.LINE_STRIP,TRIANGLES:a.WebGLConstants.TRIANGLES,TRIANGLE_STRIP:a.WebGLConstants.TRIANGLE_STRIP,TRIANGLE_FAN:a.WebGLConstants.TRIANGLE_FAN,validate:function(t){return t===i.POINTS||t===i.LINES||t===i.LINE_LOOP||t===i.LINE_STRIP||t===i.TRIANGLES||t===i.TRIANGLE_STRIP||t===i.TRIANGLE_FAN}},o=Object.freeze(i);function s(t){t=n.defaultValue(t,n.defaultValue.EMPTY_OBJECT),this.attributes=t.attributes,this.indices=t.indices,this.primitiveType=n.defaultValue(t.primitiveType,o.TRIANGLES),this.boundingSphere=t.boundingSphere,this.geometryType=n.defaultValue(t.geometryType,r.NONE),this.boundingSphereCV=t.boundingSphereCV,this.offsetAttribute=t.offsetAttribute}s.computeNumberOfVertices=function(t){var e,a,r=-1;for(e in t.attributes)t.attributes.hasOwnProperty(e)&&n.defined(t.attributes[e])&&n.defined(t.attributes[e].values)&&(r=(a=t.attributes[e]).values.length/a.componentsPerAttribute);return r};var A=new d.Cartographic,P=new d.Cartesian3,S=new d.Matrix4,G=[new d.Cartographic,new d.Cartographic,new d.Cartographic],w=[new d.Cartesian2,new d.Cartesian2,new d.Cartesian2],R=[new d.Cartesian2,new d.Cartesian2,new d.Cartesian2],O=new d.Cartesian3,_=new x.Quaternion,g=new d.Matrix4,V=new d.Matrix2;s._textureCoordinateRotationPoints=function(t,e,a,r){for(var n=d.Rectangle.center(r,A),n=d.Cartographic.toCartesian(n,a,P),n=x.Transforms.eastNorthUpToFixedFrame(n,a,S),i=d.Matrix4.inverse(n,S),o=w,s=G,u=(s[0].longitude=r.west,s[0].latitude=r.south,s[1].longitude=r.west,s[1].latitude=r.north,s[2].longitude=r.east,s[2].latitude=r.south,O),I=0;I<3;I++)d.Cartographic.toCartesian(s[I],a,u),u=d.Matrix4.multiplyByPointAsVector(i,u,u),o[I].x=u.x,o[I].y=u.y;var n=x.Quaternion.fromAxisAngle(d.Cartesian3.UNIT_Z,-e,_),N=d.Matrix3.fromQuaternion(n,g),T=t.length,l=Number.POSITIVE_INFINITY,m=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY,y=Number.NEGATIVE_INFINITY;for(I=0;I<T;I++)u=d.Matrix4.multiplyByPointAsVector(i,t[I],u),u=d.Matrix3.multiplyByVector(N,u,u),l=Math.min(l,u.x),m=Math.min(m,u.y),p=Math.max(p,u.x),y=Math.max(y,u.y);var E=d.Matrix2.fromRotation(e,V),b=R,c=(b[0].x=l,b[0].y=m,b[1].x=l,b[1].y=y,b[2].x=p,b[2].y=m,o[0]),L=o[2].x-c.x,h=o[1].y-c.y;for(I=0;I<3;I++){var C=b[I];d.Matrix2.multiplyByVector(E,C,C),C.x=(C.x-c.x)/L,C.y=(C.y-c.y)/h}var r=b[0],n=b[1],e=b[2],f=new Array(6);return d.Cartesian2.pack(r,f),d.Cartesian2.pack(n,f,2),d.Cartesian2.pack(e,f,4),f},t.Geometry=s,t.GeometryAttribute=function(t){t=n.defaultValue(t,n.defaultValue.EMPTY_OBJECT),this.componentDatatype=t.componentDatatype,this.componentsPerAttribute=t.componentsPerAttribute,this.normalize=n.defaultValue(t.normalize,!1),this.values=t.values},t.GeometryType=r,t.PrimitiveType=o});
