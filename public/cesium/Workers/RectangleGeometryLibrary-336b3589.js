define(["exports","./Matrix2-10a61a55","./when-ae2e0b60","./RuntimeError-24b14c10","./Transforms-70ded1e8","./ComponentDatatype-b7b5db18"],function(t,m,d,n,a,X){"use strict";var w=Math.cos,M=Math.sin,Y=Math.sqrt,r={computePosition:function(t,n,a,r,e,o,s){var n=n.radiiSquared,i=t.nwCorner,g=t.boundingRectangle,u=i.latitude-t.granYCos*r+e*t.granXSin,h=w(u),c=M(u),C=n.z*c,i=i.longitude+r*t.granYSin+e*t.granXCos,l=h*w(i),h=h*M(i),S=n.x*l,n=n.y*h,l=Y(S*l+n*h+C*c);o.x=S/l,o.y=n/l,o.z=C/l,a&&(h=t.stNwCorner,d.defined(h)?(u=h.latitude-t.stGranYCos*r+e*t.stGranXSin,i=h.longitude+r*t.stGranYSin+e*t.stGranXCos,s.x=(i-t.stWest)*t.lonScalar,s.y=(u-t.stSouth)*t.latScalar):(s.x=(i-g.west)*t.lonScalar,s.y=(u-g.south)*t.latScalar))}},l=new m.Matrix2,S=new m.Cartesian3,p=new m.Cartographic,x=new m.Cartesian3,R=new a.GeographicProjection;function G(t,n,a,r,e,o,s){var i=Math.cos(n),g=r*i,i=a*i,u=Math.sin(n),r=r*u,a=a*u,u=(S=R.project(t,S),S=m.Cartesian3.subtract(S,x,S),m.Matrix2.fromRotation(n,l)),n=(S=m.Matrix2.multiplyByVector(u,S,S),S=m.Cartesian3.add(S,x,S),(t=R.unproject(S,t)).latitude),u=n+--o*a,h=n-g*--s,c=n-g*s+o*a,C=Math.max(n,u,h,c),n=Math.min(n,u,h,c),u=t.longitude,h=u+o*i,c=u+s*r,s=u+s*r+o*i;return{north:C,south:n,east:Math.max(u,h,c,s),west:Math.min(u,h,c,s),granYCos:g,granYSin:r,granXCos:i,granXSin:a,nwCorner:t}}r.computeOptions=function(t,n,a,r,e,o,s){var i=t.east,g=t.west,u=t.north,h=t.south,c=!1,C=!1,l=(u===X.CesiumMath.PI_OVER_TWO&&(c=!0),h===-X.CesiumMath.PI_OVER_TWO&&(C=!0),u-h),S=i<g?X.CesiumMath.TWO_PI-g+i:i-g,d=Math.ceil(S/n)+1,n=Math.ceil(l/n)+1,S=S/(d-1),l=l/(n-1),o=m.Rectangle.northwest(t,o),w=m.Rectangle.center(t,p),w=(0===a&&0===r||(w.longitude<o.longitude&&(w.longitude+=X.CesiumMath.TWO_PI),x=R.project(w,x)),l),M=S,t=m.Rectangle.clone(t,e),e={granYCos:w,granYSin:0,granXCos:M,granXSin:0,nwCorner:o,boundingRectangle:t,width:d,height:n,northCap:c,southCap:C};return 0!==a&&(u=(w=G(o,a,S,l,0,d,n)).north,h=w.south,i=w.east,g=w.west,e.granYCos=w.granYCos,e.granYSin=w.granYSin,e.granXCos=w.granXCos,e.granXSin=w.granXSin,t.north=u,t.south=h,t.east=i,t.west=g),0!==r&&(a-=r,c=G(M=m.Rectangle.northwest(t,s),a,S,l,0,d,n),e.stGranYCos=c.granYCos,e.stGranXCos=c.granXCos,e.stGranYSin=c.granYSin,e.stGranXSin=c.granXSin,e.stNwCorner=M,e.stWest=c.west,e.stSouth=c.south),e},t.RectangleGeometryLibrary=r});
