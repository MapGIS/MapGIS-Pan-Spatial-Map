{"version":3,"file":"CoplanarPolygonGeometryLibrary-a844e827.js","sources":["../../../../Source/Core/CoplanarPolygonGeometryLibrary.js"],"sourcesContent":["import Cartesian2 from './Cartesian2.js';\r\nimport Cartesian3 from './Cartesian3.js';\r\nimport Check from './Check.js';\r\nimport Matrix3 from './Matrix3.js';\r\nimport OrientedBoundingBox from './OrientedBoundingBox.js';\r\n\r\n/**\r\n * @private\r\n */\r\nvar CoplanarPolygonGeometryLibrary = {};\r\n\r\nvar scratchIntersectionPoint = new Cartesian3();\r\nvar scratchXAxis = new Cartesian3();\r\nvar scratchYAxis = new Cartesian3();\r\nvar scratchZAxis = new Cartesian3();\r\nvar obbScratch = new OrientedBoundingBox();\r\n\r\nCoplanarPolygonGeometryLibrary.validOutline = function (positions) {\r\n    //>>includeStart('debug', pragmas.debug);\r\n    Check.defined('positions', positions);\r\n    //>>includeEnd('debug');\r\n\r\n    var orientedBoundingBox = OrientedBoundingBox.fromPoints(positions, obbScratch);\r\n    var halfAxes = orientedBoundingBox.halfAxes;\r\n    var xAxis = Matrix3.getColumn(halfAxes, 0, scratchXAxis);\r\n    var yAxis = Matrix3.getColumn(halfAxes, 1, scratchYAxis);\r\n    var zAxis = Matrix3.getColumn(halfAxes, 2, scratchZAxis);\r\n\r\n    var xMag = Cartesian3.magnitude(xAxis);\r\n    var yMag = Cartesian3.magnitude(yAxis);\r\n    var zMag = Cartesian3.magnitude(zAxis);\r\n\r\n    // If all the points are on a line return undefined because we can't draw a polygon\r\n    return !((xMag === 0 && (yMag === 0 || zMag === 0)) || (yMag === 0 && zMag === 0));\r\n};\r\n\r\n// call after removeDuplicates\r\nCoplanarPolygonGeometryLibrary.computeProjectTo2DArguments = function (positions, centerResult, planeAxis1Result, planeAxis2Result) {\r\n    //>>includeStart('debug', pragmas.debug);\r\n    Check.defined('positions', positions);\r\n    Check.defined('centerResult', centerResult);\r\n    Check.defined('planeAxis1Result', planeAxis1Result);\r\n    Check.defined('planeAxis2Result', planeAxis2Result);\r\n    //>>includeEnd('debug');\r\n\r\n    var orientedBoundingBox = OrientedBoundingBox.fromPoints(positions, obbScratch);\r\n    var halfAxes = orientedBoundingBox.halfAxes;\r\n    var xAxis = Matrix3.getColumn(halfAxes, 0, scratchXAxis);\r\n    var yAxis = Matrix3.getColumn(halfAxes, 1, scratchYAxis);\r\n    var zAxis = Matrix3.getColumn(halfAxes, 2, scratchZAxis);\r\n\r\n    var xMag = Cartesian3.magnitude(xAxis);\r\n    var yMag = Cartesian3.magnitude(yAxis);\r\n    var zMag = Cartesian3.magnitude(zAxis);\r\n    var min = Math.min(xMag, yMag, zMag);\r\n\r\n    // If all the points are on a line return undefined because we can't draw a polygon\r\n    if ((xMag === 0 && (yMag === 0 || zMag === 0)) || (yMag === 0 && zMag === 0)) {\r\n        return false;\r\n    }\r\n\r\n    var planeAxis1;\r\n    var planeAxis2;\r\n\r\n    if (min === yMag || min === zMag) {\r\n        planeAxis1 = xAxis;\r\n    }\r\n    if (min === xMag) {\r\n        planeAxis1 = yAxis;\r\n    } else if (min === zMag) {\r\n        planeAxis2 = yAxis;\r\n    }\r\n    if (min === xMag || min === yMag) {\r\n        planeAxis2 = zAxis;\r\n    }\r\n\r\n    Cartesian3.normalize(planeAxis1, planeAxis1Result);\r\n    Cartesian3.normalize(planeAxis2, planeAxis2Result);\r\n    Cartesian3.clone(orientedBoundingBox.center, centerResult);\r\n    return true;\r\n};\r\n\r\nfunction projectTo2D(position, center, axis1, axis2, result) {\r\n    var v = Cartesian3.subtract(position, center, scratchIntersectionPoint);\r\n    var x = Cartesian3.dot(axis1, v);\r\n    var y = Cartesian3.dot(axis2, v);\r\n\r\n    return Cartesian2.fromElements(x, y, result);\r\n}\r\n\r\nCoplanarPolygonGeometryLibrary.createProjectPointsTo2DFunction = function (center, axis1, axis2) {\r\n    return function (positions) {\r\n        var positionResults = new Array(positions.length);\r\n        for (var i = 0; i < positions.length; i++) {\r\n            positionResults[i] = projectTo2D(positions[i], center, axis1, axis2);\r\n        }\r\n\r\n        return positionResults;\r\n    };\r\n};\r\n\r\nCoplanarPolygonGeometryLibrary.createProjectPointTo2DFunction = function (center, axis1, axis2) {\r\n    return function (position, result) {\r\n        return projectTo2D(position, center, axis1, axis2, result);\r\n    };\r\n};\r\nexport default CoplanarPolygonGeometryLibrary;\r\n"],"names":["Cartesian3","OrientedBoundingBox","Check","Matrix3","Cartesian2"],"mappings":"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"}