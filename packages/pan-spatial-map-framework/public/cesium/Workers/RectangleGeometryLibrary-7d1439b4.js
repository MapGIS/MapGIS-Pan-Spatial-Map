define(["exports","./Cartesian2-8dbd81c1","./when-695b7bde","./Check-c47ad5ed","./Transforms-afef28e3","./Math-09ca1a10","./GeometryAttribute-8921fd23"],function(n,X,M,a,r,Y,l){"use strict";var S=Math.cos,w=Math.sin,G=Math.sqrt,t={computePosition:function(t,n,u,a,r,e,o){var n=n.radiiSquared,s=t.nwCorner,c=t.boundingRectangle,i=s.latitude-t.granYCos*a+r*t.granXSin,g=S(i),C=w(i),l=n.z*C,s=s.longitude+a*t.granYSin+r*t.granXCos,h=g*S(s),g=g*w(s),d=n.x*h,n=n.y*g,h=G(d*h+n*g+l*C);e.x=d/h,e.y=n/h,e.z=l/h,u&&(g=t.stNwCorner,M.defined(g)?(i=g.latitude-t.stGranYCos*a+r*t.stGranXSin,s=g.longitude+a*t.stGranYSin+r*t.stGranXCos,o.x=(s-t.stWest)*t.lonScalar,o.y=(i-t.stSouth)*t.latScalar):(o.x=(s-c.west)*t.lonScalar,o.y=(i-c.south)*t.latScalar))}},x=new l.Matrix2,d=new X.Cartesian3,R=new X.Cartographic,m=new X.Cartesian3,p=new r.GeographicProjection;function f(t,n,a,r,u,e,o){var s=Math.cos(n),c=r*s,s=a*s,i=Math.sin(n),r=r*i,a=a*i,i=(d=p.project(t,d),d=X.Cartesian3.subtract(d,m,d),l.Matrix2.fromRotation(n,x)),n=(d=l.Matrix2.multiplyByVector(i,d,d),d=X.Cartesian3.add(d,m,d),(t=p.unproject(d,t)).latitude),i=n+--e*a,g=n-c*--o,h=n-c*o+e*a,C=Math.max(n,i,g,h),n=Math.min(n,i,g,h),i=t.longitude,g=i+e*s,h=i+o*r,o=i+o*r+e*s;return{north:C,south:n,east:Math.max(i,g,h,o),west:Math.min(i,g,h,o),granYCos:c,granYSin:r,granXCos:s,granXSin:a,nwCorner:t}}t.computeOptions=function(t,n,a,u,r,c,C){var e=t.east,o=t.west,l=t.north,d=t.south,s=!1,S=!1,i=(l===Y.CesiumMath.PI_OVER_TWO&&(s=!0),d===-Y.CesiumMath.PI_OVER_TWO&&(S=!0),l-d),g=e<o?Y.CesiumMath.TWO_PI-o+e:e-o,w=Math.ceil(g/n)+1,n=Math.ceil(i/n)+1,g=g/(w-1),i=i/(n-1),c=X.Rectangle.northwest(t,c),h=X.Rectangle.center(t,R),h=(0===a&&0===u||(h.longitude<c.longitude&&(h.longitude+=Y.CesiumMath.TWO_PI),m=p.project(h,m)),i),M=g,t=X.Rectangle.clone(t,r),r={granYCos:h,granYSin:0,granXCos:M,granXSin:0,nwCorner:c,boundingRectangle:t,width:w,height:n,northCap:s,southCap:S};return 0!==a&&(l=(h=f(c,a,g,i,0,w,n)).north,d=h.south,e=h.east,o=h.west,r.granYCos=h.granYCos,r.granYSin=h.granYSin,r.granXCos=h.granXCos,r.granXSin=h.granXSin,t.north=l,t.south=d,t.east=e,t.west=o),0!==u&&(a-=u,s=f(M=X.Rectangle.northwest(t,C),a,g,i,0,w,n),r.stGranYCos=s.granYCos,r.stGranXCos=s.granXCos,r.stGranYSin=s.granYSin,r.stGranXSin=s.granXSin,r.stNwCorner=M,r.stWest=s.west,r.stSouth=s.south),r},n.RectangleGeometryLibrary=t});
