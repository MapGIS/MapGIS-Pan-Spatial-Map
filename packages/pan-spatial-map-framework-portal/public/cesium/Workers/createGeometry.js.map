{"version":3,"file":"createGeometry.js","sources":["../../../../Source/WorkersES6/createGeometry.js"],"sourcesContent":["/* global require */\r\nimport defined from '../Core/defined.js';\r\nimport PrimitivePipeline from '../Scene/PrimitivePipeline.js';\r\nimport when from '../ThirdParty/when.js';\r\nimport createTaskProcessorWorker from './createTaskProcessorWorker.js';\r\n\r\nvar moduleCache = {};\r\n\r\nfunction getModule(moduleName) {\r\n    var module = moduleCache[moduleName];\r\n    if (!defined(module)) {\r\n        if (typeof exports === 'object') {\r\n            // Use CommonJS-style require.\r\n            moduleCache[module] = module = require('Workers/' + moduleName);\r\n        } else {\r\n            // Use AMD-style require.\r\n            // in web workers, require is synchronous\r\n            require(['Workers/' + moduleName], function (f) {\r\n                module = f;\r\n                moduleCache[module] = f;\r\n            });\r\n        }\r\n    }\r\n    return module;\r\n}\r\n\r\nfunction createGeometry(parameters, transferableObjects) {\r\n    var subTasks = parameters.subTasks;\r\n    var length = subTasks.length;\r\n    var resultsOrPromises = new Array(length);\r\n\r\n    for (var i = 0; i < length; i++) {\r\n        var task = subTasks[i];\r\n        var geometry = task.geometry;\r\n        var moduleName = task.moduleName;\r\n\r\n        if (defined(moduleName)) {\r\n            var createFunction = getModule(moduleName);\r\n            resultsOrPromises[i] = createFunction(geometry, task.offset);\r\n        } else {\r\n            //Already created geometry\r\n            resultsOrPromises[i] = geometry;\r\n        }\r\n    }\r\n\r\n    return when.all(resultsOrPromises, function (results) {\r\n        return PrimitivePipeline.packCreateGeometryResults(results, transferableObjects);\r\n    });\r\n}\r\nexport default createTaskProcessorWorker(createGeometry);\r\n"],"names":["defined","when","PrimitivePipeline"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;IAAA;AAKA;IACA,IAAI,WAAW,GAAG,EAAE,CAAC;AACrB;IACA,SAAS,SAAS,CAAC,UAAU,EAAE;IAC/B,IAAI,IAAI,MAAM,GAAG,WAAW,CAAC,UAAU,CAAC,CAAC;IACzC,IAAI,IAAI,CAACA,YAAO,CAAC,MAAM,CAAC,EAAE;IAC1B,QAAQ,IAAI,OAAO,OAAO,KAAK,QAAQ,EAAE;IACzC;IACA,YAAY,WAAW,CAAC,MAAM,CAAC,GAAG,MAAM,GAAG,OAAO,CAAC,UAAU,GAAG,UAAU,CAAC,CAAC;IAC5E,SAAS,MAAM;IACf;IACA;IACA,YAAY,OAAO,CAAC,CAAC,UAAU,GAAG,UAAU,CAAC,EAAE,UAAU,CAAC,EAAE;IAC5D,gBAAgB,MAAM,GAAG,CAAC,CAAC;IAC3B,gBAAgB,WAAW,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IACxC,aAAa,CAAC,CAAC;IACf,SAAS;IACT,KAAK;IACL,IAAI,OAAO,MAAM,CAAC;IAClB,CAAC;AACD;IACA,SAAS,cAAc,CAAC,UAAU,EAAE,mBAAmB,EAAE;IACzD,IAAI,IAAI,QAAQ,GAAG,UAAU,CAAC,QAAQ,CAAC;IACvC,IAAI,IAAI,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC;IACjC,IAAI,IAAI,iBAAiB,GAAG,IAAI,KAAK,CAAC,MAAM,CAAC,CAAC;AAC9C;IACA,IAAI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,EAAE,CAAC,EAAE,EAAE;IACrC,QAAQ,IAAI,IAAI,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;IAC/B,QAAQ,IAAI,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;IACrC,QAAQ,IAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;AACzC;IACA,QAAQ,IAAIA,YAAO,CAAC,UAAU,CAAC,EAAE;IACjC,YAAY,IAAI,cAAc,GAAG,SAAS,CAAC,UAAU,CAAC,CAAC;IACvD,YAAY,iBAAiB,CAAC,CAAC,CAAC,GAAG,cAAc,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;IACzE,SAAS,MAAM;IACf;IACA,YAAY,iBAAiB,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC;IAC5C,SAAS;IACT,KAAK;AACL;IACA,IAAI,OAAOC,SAAI,CAAC,GAAG,CAAC,iBAAiB,EAAE,UAAU,OAAO,EAAE;IAC1D,QAAQ,OAAOC,mCAAiB,CAAC,yBAAyB,CAAC,OAAO,EAAE,mBAAmB,CAAC,CAAC;IACzF,KAAK,CAAC,CAAC;IACP,CAAC;AACD,2BAAe,yBAAyB,CAAC,cAAc,CAAC;;;;;;;;"}