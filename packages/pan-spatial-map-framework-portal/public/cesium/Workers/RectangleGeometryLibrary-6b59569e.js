define(["exports","./Cartesian2-38b35910","./when-ae2e0b60","./Check-f996273c","./Transforms-07a9fab5","./Math-5bbcea10","./GeometryAttribute-586bf52c"],function(n,X,M,a,r,Y,l){"use strict";var w=Math.cos,d=Math.sin,f=Math.sqrt,t={computePosition:function(t,n,u,a,r,e,o){var n=n.radiiSquared,s=t.nwCorner,c=t.boundingRectangle,i=s.latitude-t.granYCos*a+r*t.granXSin,g=w(i),C=d(i),l=n.z*C,s=s.longitude+a*t.granYSin+r*t.granXCos,h=g*w(s),g=g*d(s),S=n.x*h,n=n.y*g,h=f(S*h+n*g+l*C);e.x=S/h,e.y=n/h,e.z=l/h,u&&(g=t.stNwCorner,M.defined(g)?(i=g.latitude-t.stGranYCos*a+r*t.stGranXSin,s=g.longitude+a*t.stGranYSin+r*t.stGranXCos,o.x=(s-t.stWest)*t.lonScalar,o.y=(i-t.stSouth)*t.latScalar):(o.x=(s-c.west)*t.lonScalar,o.y=(i-c.south)*t.latScalar))}},G=new l.Matrix2,S=new X.Cartesian3,x=new X.Cartographic,m=new X.Cartesian3,p=new r.GeographicProjection;function b(t,n,a,r,u,e,o){var s=Math.cos(n),c=r*s,s=a*s,i=Math.sin(n),r=r*i,a=a*i,i=(S=p.project(t,S),S=X.Cartesian3.subtract(S,m,S),l.Matrix2.fromRotation(n,G)),n=(S=l.Matrix2.multiplyByVector(i,S,S),S=X.Cartesian3.add(S,m,S),(t=p.unproject(S,t)).latitude),i=n+--e*a,g=n-c*--o,h=n-c*o+e*a,C=Math.max(n,i,g,h),n=Math.min(n,i,g,h),i=t.longitude,g=i+e*s,h=i+o*r,o=i+o*r+e*s;return{north:C,south:n,east:Math.max(i,g,h,o),west:Math.min(i,g,h,o),granYCos:c,granYSin:r,granXCos:s,granXSin:a,nwCorner:t}}t.computeOptions=function(t,n,a,u,r,c,C){var e=t.east,o=t.west,l=t.north,S=t.south,s=!1,w=!1,i=(l===Y.CesiumMath.PI_OVER_TWO&&(s=!0),S===-Y.CesiumMath.PI_OVER_TWO&&(w=!0),l-S),g=e<o?Y.CesiumMath.TWO_PI-o+e:e-o,d=Math.ceil(g/n)+1,n=Math.ceil(i/n)+1,g=g/(d-1),i=i/(n-1),c=X.Rectangle.northwest(t,c),h=X.Rectangle.center(t,x),h=(0===a&&0===u||(h.longitude<c.longitude&&(h.longitude+=Y.CesiumMath.TWO_PI),m=p.project(h,m)),i),M=g,t=X.Rectangle.clone(t,r),r={granYCos:h,granYSin:0,granXCos:M,granXSin:0,nwCorner:c,boundingRectangle:t,width:d,height:n,northCap:s,southCap:w};return 0!==a&&(l=(h=b(c,a,g,i,0,d,n)).north,S=h.south,e=h.east,o=h.west,r.granYCos=h.granYCos,r.granYSin=h.granYSin,r.granXCos=h.granXCos,r.granXSin=h.granXSin,t.north=l,t.south=S,t.east=e,t.west=o),0!==u&&(a-=u,s=b(M=X.Rectangle.northwest(t,C),a,g,i,0,d,n),r.stGranYCos=s.granYCos,r.stGranXCos=s.granXCos,r.stGranYSin=s.granYSin,r.stGranXSin=s.granXSin,r.stNwCorner=M,r.stWest=s.west,r.stSouth=s.south),r},n.RectangleGeometryLibrary=t});
