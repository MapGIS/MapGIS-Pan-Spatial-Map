define(["exports","./arrayRemoveDuplicates-626b50c1","./Cartesian2-8dbd81c1","./when-695b7bde","./Math-09ca1a10","./PolylinePipeline-ee8b7202"],function(e,f,A,C,w,P){"use strict";var i={};var b=new A.Cartographic,M=new A.Cartographic;function E(g,e,p,u){var i=(e=f.arrayRemoveDuplicates(e,A.Cartesian3.equalsEpsilon)).length;if(!(i<2)){var c=C.defined(u),d=C.defined(p),t=new Array(i),r=new Array(i),a=new Array(i),y=e[0],n=(t[0]=y,g.cartesianToCartographic(y,b));d&&(n.height=p[0]),r[0]=n.height,a[0]=c?u[0]:0;for(var m,v,o=r[0]===a[0],l=1,s=1;s<i;++s){var P=e[s],h=g.cartesianToCartographic(P,M);d&&(h.height=p[s]),o=o&&0===h.height,m=n,v=h,w.CesiumMath.equalsEpsilon(m.latitude,v.latitude,w.CesiumMath.EPSILON10)&&w.CesiumMath.equalsEpsilon(m.longitude,v.longitude,w.CesiumMath.EPSILON10)?n.height<h.height&&(r[l-1]=h.height):(t[l]=P,r[l]=h.height,a[l]=c?u[s]:0,o=o&&r[l]===a[l],A.Cartographic.clone(h,n),++l)}if(!(o||l<2))return t.length=l,r.length=l,a.length=l,{positions:t,topHeights:r,bottomHeights:a}}}var F=new Array(2),H=new Array(2),L={positions:void 0,height:void 0,granularity:void 0,ellipsoid:void 0};i.computePositions=function(e,i,t,r,g,p){var a=E(e,i,t,r);if(C.defined(a)){i=a.positions,t=a.topHeights,r=a.bottomHeights;var n=i.length,a=n-2,u=w.CesiumMath.chordLength(g,e.maximumRadius),o=L;if(o.minDistance=u,o.ellipsoid=e,p){for(var l=0,s=0;s<n-1;s++)l+=P.PolylinePipeline.numberOfPoints(i[s],i[s+1],u)+1;var c=new Float64Array(3*l),d=new Float64Array(3*l),y=F,h=H,m=(o.positions=y,o.height=h,0);for(s=0;s<n-1;s++){y[0]=i[s],y[1]=i[s+1],h[0]=t[s],h[1]=t[s+1];var v=P.PolylinePipeline.generateArc(o);c.set(v,m),h[0]=r[s],h[1]=r[s+1],d.set(P.PolylinePipeline.generateArc(o),m),m+=v.length}}else o.positions=i,o.height=t,c=new Float64Array(P.PolylinePipeline.generateArc(o)),o.height=r,d=new Float64Array(P.PolylinePipeline.generateArc(o));return{bottomPositions:d,topPositions:c,numCorners:a}}},e.WallGeometryLibrary=i});
