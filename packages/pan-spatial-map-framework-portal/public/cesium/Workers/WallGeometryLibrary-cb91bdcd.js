define(["exports","./arrayRemoveDuplicates-bdf50aa0","./Cartesian2-38b35910","./when-ae2e0b60","./Math-5bbcea10","./PolylinePipeline-f47a23a0"],function(e,f,A,C,w,P){"use strict";var i={};var b=new A.Cartographic,M=new A.Cartographic;function E(g,e,p,u){var i=(e=f.arrayRemoveDuplicates(e,A.Cartesian3.equalsEpsilon)).length;if(!(i<2)){var c=C.defined(u),d=C.defined(p),t=new Array(i),a=new Array(i),r=new Array(i),y=e[0],n=(t[0]=y,g.cartesianToCartographic(y,b));d&&(n.height=p[0]),a[0]=n.height,r[0]=c?u[0]:0;for(var m,v,o=a[0]===r[0],l=1,s=1;s<i;++s){var P=e[s],h=g.cartesianToCartographic(P,M);d&&(h.height=p[s]),o=o&&0===h.height,m=n,v=h,w.CesiumMath.equalsEpsilon(m.latitude,v.latitude,w.CesiumMath.EPSILON10)&&w.CesiumMath.equalsEpsilon(m.longitude,v.longitude,w.CesiumMath.EPSILON10)?n.height<h.height&&(a[l-1]=h.height):(t[l]=P,a[l]=h.height,r[l]=c?u[s]:0,o=o&&a[l]===r[l],A.Cartographic.clone(h,n),++l)}if(!(o||l<2))return t.length=l,a.length=l,r.length=l,{positions:t,topHeights:a,bottomHeights:r}}}var F=new Array(2),H=new Array(2),L={positions:void 0,height:void 0,granularity:void 0,ellipsoid:void 0};i.computePositions=function(e,i,t,a,g,p){var r=E(e,i,t,a);if(C.defined(r)){i=r.positions,t=r.topHeights,a=r.bottomHeights;var n=i.length,r=n-2,u=w.CesiumMath.chordLength(g,e.maximumRadius),o=L;if(o.minDistance=u,o.ellipsoid=e,p){for(var l=0,s=0;s<n-1;s++)l+=P.PolylinePipeline.numberOfPoints(i[s],i[s+1],u)+1;var c=new Float64Array(3*l),d=new Float64Array(3*l),y=F,h=H,m=(o.positions=y,o.height=h,0);for(s=0;s<n-1;s++){y[0]=i[s],y[1]=i[s+1],h[0]=t[s],h[1]=t[s+1];var v=P.PolylinePipeline.generateArc(o);c.set(v,m),h[0]=a[s],h[1]=a[s+1],d.set(P.PolylinePipeline.generateArc(o),m),m+=v.length}}else o.positions=i,o.height=t,c=new Float64Array(P.PolylinePipeline.generateArc(o)),o.height=a,d=new Float64Array(P.PolylinePipeline.generateArc(o));return{bottomPositions:d,topPositions:c,numCorners:r}}},e.WallGeometryLibrary=i});
